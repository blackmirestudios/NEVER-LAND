<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintage Anonymous Chat - 1990</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=VT323&display=swap">
    <style>
        body {
            font-family: 'VT323', monospace;
            background-color: #2b2b2b;
            color: #33ff33;
            image-rendering: pixelated;
            position: relative;
        }
        
        /* Override text color for FriendNet content */
        #browser-content .text-black,
        #browser-content .text-blue-800,
        #browser-content .text-gray-600,
        #browser-content .text-gray-500,
        #browser-content .text-red-800,
        #browser-content .text-red-700,
        #browser-content .text-blue-700,
        #browser-content .text-white,
        #browser-content .text-green-400,
        #browser-content .text-blue-600,
        #browser-content .text-gray-400 {
            color: #000000 !important;
        }
        
        /* Ensure all text in browser content is black */
        #browser-content,
        #browser-content * {
            color: #000000 !important;
        }
        
        /* Vignette effect */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            box-shadow: inset 0 0 200px rgba(0, 0, 0, 0.9);
        }
        
        .curved-monitor {
            border-radius: 20px 20px 30px 30px;
            overflow: hidden;
            position: relative;
        }
        
        .curved-monitor::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 20px 20px 30px 30px;
            box-shadow: 
                inset 0 0 80px 20px rgba(0, 0, 0, 0.7),
                0 0 30px 10px rgba(0, 0, 0, 0.5);
            pointer-events: none;
            z-index: 5;
        }
        
        .crt-effect {
            position: relative;
            overflow: hidden;
        }
        
        .crt-effect::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.1), rgba(0, 255, 0, 0.05), rgba(0, 0, 255, 0.1));
            z-index: 2;
            background-size: 100% 3px, 4px 100%;
            pointer-events: none;
        }
        
        .scanlines {
            position: relative;
            overflow: hidden;
        }
        
        .scanlines::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                rgba(255,255,255,0) 0%,
                rgba(255,255,255,0.06) 50%,
                rgba(255,255,255,0) 100%
            );
            background-size: 100% 3px;
            pointer-events: none;
            z-index: 10;
            animation: scanline 6s linear infinite;
        }
        
        @keyframes scanline {
            0% {
                background-position: 0 0;
            }
            100% {
                background-position: 0 100%;
            }
        }
        
        .blink {
            animation: blink 1s steps(1) infinite;
        }
        
        @keyframes blink {
            50% {
                opacity: 0;
            }
        }
        
        .pixel-border {
            border-image: 
                linear-gradient(
                    45deg,
                    #c0c0c0 25%,
                    #dfdfdf 25%,
                    #dfdfdf 50%,
                    #c0c0c0 50%,
                    #c0c0c0 75%,
                    #dfdfdf 75%,
                    #dfdfdf 100%
                ) 2;
            border-style: solid;
            border-width: 4px;
        }
        
        .message-in {
            background-color: #e0e0e0;
            border-left: 4px solid #808080;
            color: #000000;
        }
        
        .message-out {
            background-color: #d0d0d0;
            border-left: 4px solid #606060;
            color: #000000;
        }
        
        .noise {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.15'/%3E%3C/svg%3E");
        }
        
        .btn-3d {
            box-shadow: 
                inset -2px -2px 0px 0px #808080,
                inset 2px 2px 0px 0px #ffffff,
                inset -4px -4px 0px 0px #c0c0c0,
                inset 4px 4px 0px 0px #dfdfdf;
        }
        
        .btn-3d:active {
            box-shadow: 
                inset 2px 2px 0px 0px #808080,
                inset -2px -2px 0px 0px #ffffff,
                inset 4px 4px 0px 0px #c0c0c0,
                inset -4px -4px 0px 0px #dfdfdf;
        }
        
        .window {
            box-shadow: 
                2px 2px 0px 0px #ffffff,
                -2px -2px 0px 0px #808080,
                4px 4px 0px 0px #dfdfdf,
                -4px -4px 0px 0px #c0c0c0;
        }
    </style>
</head>
<body class="min-h-screen p-1 noise crt-effect scanlines" style="background-color: #008080;">
    <!-- Login Screen -->
    <div id="login-screen" class="fixed inset-0 bg-blue-900 flex items-center justify-center z-100">
        <div class="window bg-gray-300 p-4 w-80">
            <div class="bg-blue-700 p-2 text-white text-center mb-4">
                <h2 class="text-xl">Windows 95</h2>
            </div>
            
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-blue-700 flex items-center justify-center mx-auto window mb-4">
                    <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 3L3 8.5V21h6v-6h6v6h6V8.5L12 3z"/>
                    </svg>
                </div>
                <p class="text-black mb-2">Please enter your password to continue:</p>
            </div>
            
            <div class="mb-4">
                <input type="password" id="login-password" class="w-full p-2 pixel-border bg-white text-black focus:outline-none" placeholder="Password">
                <p id="login-error" class="text-red-600 text-sm mt-1 hidden">Incorrect password. Please try again.</p>
            </div>
            
            <button onclick="checkLoginPassword()" class="btn-3d bg-blue-700 text-white px-4 py-2 w-full">
                Login
            </button>
            
            <div class="text-center mt-4 text-sm text-gray-600">
                Hint: The password is "password"
            </div>
        </div>
    </div>
    <!-- Desktop Content (initially hidden) -->
    <div id="desktop-content" class="hidden">
    <div class="absolute top-4 left-4 flex flex-col space-y-4">
        <div class="text-center cursor-pointer" onclick="openChatWindow()">
            <div class="w-16 h-16 bg-blue-700 flex items-center justify-center mx-auto window">
                <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">Anonymous Chat</span>
        </div>
        
        <div class="text-center cursor-pointer" onclick="openExplorerWindow()">
            <div class="w-16 h-16 bg-gray-300 flex items-center justify-center mx-auto window">
                <svg class="w-10 h-10 text-blue-800" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V6h5.17l2 2H20v10z"/>
                </svg>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">File Explorer</span>
        </div>
        
        <div class="text-center cursor-pointer" onclick="openBrowserWindow()">
            <div class="w-16 h-16 bg-green-500 flex items-center justify-center mx-auto window">
                <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">Browser</span>
        </div>
        
        <div class="text-center cursor-pointer" onclick="openCmdWindow()">
            <div class="w-16 h-16 bg-black flex items-center justify-center mx-auto window">
                <span class="text-green-500 text-xs font-bold">C:\></span>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">Command Prompt</span>
        </div>
        
        <div class="text-center cursor-pointer" onclick="openUsbWindow()">
            <div class="w-16 h-16 bg-purple-600 flex items-center justify-center mx-auto window">
                <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M15 7v4h1v2h-3V5h2l-3-4-3 4h2v8H8v-2.07c.7-.37 1.2-1.08 1.2-1.93 0-1.21-.99-2.2-2.2-2.2-1.21 0-2.2.99-2.2 2.2 0 .85.5 1.56 1.2 1.93V13c0 1.11.89 2 2 2h3v3.05c-.71.37-1.2 1.1-1.2 1.95 0 1.22.99 2.2 2.2 2.2 1.21 0 2.2-.98 2.2-2.2 0-.85-.49-1.58-1.2-1.95V15h3c1.11 0 2-.89 2-2v-2h1V7h-4z"/>
                </svg>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">USB Drive</span>
        </div>
        
        <div class="text-center cursor-pointer" onclick="openCmdPasscodeFile()">
            <div class="w-16 h-16 bg-blue-300 flex items-center justify-center mx-auto window">
                <span class="text-black text-2xl">📄</span>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">CMD give-pass-code.txt</span>
        </div>
        
        <div class="text-center cursor-pointer" onclick="openVideoWindow()">
            <div class="w-16 h-16 bg-red-600 flex items-center justify-center mx-auto window">
                <span class="text-white text-2xl">📹</span>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">Video Evidence</span>
        </div>
        
        <div class="text-center cursor-pointer" onclick="openYouTubeVideo()">
            <div class="w-16 h-16 bg-red-600 flex items-center justify-center mx-auto window">
                <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-极 897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
                </svg>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">YouTube</span>
        </div>
        
        <div class="text-center cursor-pointer" onclick="openDvdWindow()">
            <div class="w-16 h-16 bg-purple-500 flex items-center justify-center mx-auto window">
                <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
                </svg>
            </div>
            <span class="text-white bg-blue-700 px-1 mt-1 text-xs window">DVD</span>
        </div>
    </div>

    <!-- Enhanced Taskbar -->
    <div class="fixed bottom-0 left-0 right-0 bg-gray-400 pixel-border flex items-center p-1 z-50 h-10">
        <!-- Start Button -->
        <div class="btn-3d bg-blue-700 text-white px-3 py-1 flex items-center h-8 mr-2 cursor-pointer" id="start-button">
            <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 3L3 8.5V21h6v-6h6v6h6V8.5L12 3z"/>
            </svg>
            <span class="font-bold">Start</span>
        </div>
        
        <!-- Start Menu (initially hidden) -->
        <div id="start-menu" class="absolute bottom-10 left-0 w-64 bg-gray-300 window hidden z-60">
            <div class="p-2 bg-blue-700 text-white font-bold">
                Windows 95
            </div>
            <div class="p-2 bg-gray-100 flex items-center cursor-pointer hover:bg-blue-700 hover:text-white">
                <div class="w-6 h-6 bg-blue-500 mr-2 flex items-center justify-center text-white">W</div>
                <span>Programs</span>
                <span class="ml-auto">▶</span>
            </div>
            <div class="p-2 bg-gray-100 flex items-center cursor-pointer hover:bg-blue-700 hover:text-white">
                <div class="w-6 h-6 bg-red-500 mr-2 flex items-center justify-center text-white">D</div>
                <span>Documents</span>
            </div>
            <div class="p-2 bg-gray-100 flex items-center cursor-pointer hover:bg-blue-700 hover:text-white">
                <div class="w-6 h-6 bg-yellow-500 mr-2 flex items-center justify-center text-white">S</div>
                <span>Settings</span>
            </div>
            <div class="p-2 bg-gray-100 flex items-center cursor-pointer hover:bg-blue-700 hover:text-white">
                <div class="w-6 h-6 bg-green-500 mr-2 flex items-center justify-center text-white">F</div>
                <span>Find</span>
            </div>
            <div class="p-2 bg-gray-100 flex items-center cursor-pointer hover:bg-blue-700 hover:text-white">
                <div class="w-6 h-6 bg-purple-500 mr-2 flex items-center justify-center text-white">H</div>
                <span>Help</span>
            </div>
            <div class="p-2 bg-gray-100 flex items-center cursor-pointer hover:bg-blue-700 hover:text-white">
                <div class="w-6 h-6 bg-gray-500 mr-2 flex items-center justify-center text-white">R</div>
                <span>Run...</span>
            </div>
            <div class="border-t border-gray-400"></div>
            <div class="p-2 bg-gray-100 flex items-center cursor-pointer hover:bg-blue-700 hover:text-white" id="shutdown-option">
                <div class="w-6 h-6 bg-red-700 mr-2 flex items-center justify-center text-white">!</div>
                <span>Shut Down...</span>
            </div>
        </div>
        
        <!-- Quick Launch Icons -->
        <div class="flex items-center space-x-1 mr-4">
            <div class="w-6 h-6 bg-blue-700 flex items-center justify-center window cursor-pointer" title="Anonymous Chat" onclick="openChatWindow()">
                <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
                </svg>
            </div>
            <div class="w-6 h-6 bg-gray-300 flex items-center justify-center window cursor-pointer" title="File Explorer" onclick="openExplorerWindow()">
                <svg class="w-4 h-4 text-blue-800" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V6h5.17l2 2H20v10z"/>
                </svg>
            </div>
            <div class="w-6 h-6 bg-gray-300 flex items-center justify-center window cursor-pointer" title="Notepad">
                <svg class="w-4 h-4 text-blue-800" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                </svg>
            </div>
            <div class="w-6 h-6 bg-black flex items-center justify-center window cursor-pointer" title="Command Prompt" onclick="openCmdWindow()">
                <span class="text-green-500 text-xs font-bold">C:\></span>
            </div>
        </div>
        
        <!-- Active Window Indicator -->
        <div class="flex-1 bg-gray-300 pixel-border h-6 flex items-center px-2 mr-4">
            <span class="text-black text-sm">Anonymous Chat v1.0</span>
        </div>
        
        <!-- System Tray -->
        <div class="flex items-center space-x-1">
            <div class="w-6 h-6 bg-gray-300 flex items-center justify-center window" title="Volume">
                <svg class="w-3 h-3 text-black" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                </svg>
            </div>
            <div class="w-6 h-6 bg-gray-300 flex items-center justify-center window" title="Network">
                <svg class="w-3 h-3 text-black" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"/>
                </svg>
            </div>
            <div class="px-2 bg-gray-300 pixel-border h-6 flex items-center text-black text-sm">
                <span id="time-display">14:30:45</span>
            </div>
        </div>
    </div>

    <!-- Notepad Window (initially hidden) -->
    <div id="notepad-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">readme.txt - Notepad</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="toggleBrowserFullScreen()">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeNotepadWindow()">×</div>
                </div>
            </div>
            
            <!-- Menu bar -->
            <div class="bg-blue-300 text-blue-900 p-1 flex pixel-border">
                <span class="mr-4">File</span>
                <span class="mr-4">Edit</span>
                <span class="mr-4">Search</span>
                <span>Help</span>
            </div>
            
            <!-- Content area -->
            <div class="p-4 bg-white pixel-border min-h-[400px]">
                <textarea class="w-full h-full bg-white text-black font-mono resize-none focus:outline-none" rows="20" readonly>
I’ve seen a lot of crimes in my career, but this one feels personal. Someone set fire to the one place in this city where children could feel safe, laugh, and forget the world outside. A playground reduced to ash, a place of joy turned into a scar. Whoever did this wanted to send a message—or simply wanted to destroy innocence itself.

I don’t intend to let them get away with it. I’ve already started piecing together the puzzle: fragments of melted plastic, boot prints in the dirt, witnesses who swear they saw a shadow slipping away just before the flames rose. It’s not much, but it’s enough to tell me one thing—the arsonist is careless.

Every criminal leaves a trail. It’s only a matter of time before I follow it straight to their door. And when I do, I’ll make sure they understand: burning down a place for children isn’t just a crime. It’s a declaration of war.

This city’s kids deserve their laughter back. And I’ll see to it that the one who stole it pays the price.
                </textarea>
            </div>
            
            <!-- Status bar -->
            <div class="bg-gray-500 text-white p-1 flex justify-between pixel-border">
                <span>Ln 1, Col 1</span>
                <span>100%</span>
            </div>
        </div>
    </div>

    <!-- File Explorer Window (initially hidden) -->
    <div id="explorer-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">File Explorer</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="toggleBrowserFullScreen()">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeExplorerWindow()">×</div>
                </div>
            </div>
            
            <!-- Menu bar -->
            <div class="bg-blue-300 text-blue-900 p-1 flex pixel-border">
                <span class="mr-4">File</span>
                <span class="mr-4">Edit</span>
                <span class="mr-4">View</span>
                <span>Help</span>
            </div>
            
            <!-- Toolbar -->
            <div class="bg-gray-300 p-1 flex items-center pixel-border">
                <div class="w-6 h-6 bg-gray-200 mr-2 window flex items-center justify-center cursor-pointer" title="Up">
                    <span class="text-black">↑</span>
                </div>
                <div class="w-6 h-6 bg-gray-200 mr-4 window flex items-center justify-center cursor-pointer" title="Refresh">
                    <span class="text-black">↻</span>
                </div>
                <div class="text-black text-sm">C:\</div>
            </div>
            
            <!-- Main content -->
            <div class="p-4 bg-gray-200 pixel-border min-h-[400px] flex">
                <!-- Sidebar -->
                <div class="w-1/4 bg-gray-300 p-2 mr-4 window">
                    <div class="text-black font-bold mb-2">Folders</div>
                    <div class="text-blue-800 cursor-pointer">Desktop</div>
                    <div class="text-blue-800 cursor-pointer">My Documents</div>
                    <div class="text-blue-800 cursor-pointer">My Computer</div>
                    <div class="text-blue-800 cursor-pointer">Network</div>
                    <div class="text-blue-800 cursor-pointer">Recycle Bin</div>
                </div>
                
                <!-- File area -->
                <div class="flex-1 grid grid-cols-4 gap-2">
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Documents</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Pictures</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Music</span>
                    </div>
                    <div class="text-center cursor-pointer" onclick="openNotepadWindow()">
                        <div class="w-16 h-16 bg-blue-300 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📄</span>
                        </div>
                        <span class="text-black text-xs">readme.txt</span>
                    </div>
                </div>
            </div>
            
            <!-- Status bar -->
            <div class="bg-gray-500 text-white p-1 flex justify-between pixel-border">
                <span>2 objects</span>
                <span>C:\</span>
            </div>
        </div>
    </div>

    <!-- Browser Window (initially hidden) -->
    <div id="browser-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-6xl mx-auto hidden" style="max-height: 90vh;">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-blue-500 mr-2 flex items-center justify-center">
                        <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                    </div>
                    <h1 class="text-white text-xl">Internet Explorer</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeBrowserWindow()">×</div>
                </div>
            </div>
            
            <!-- Menu bar -->
            <div class="bg-blue-300 text-blue-900 p-1 flex pixel-border">
                <span class="mr-4">File</span>
                <span class="mr-4">Edit</span>
                <span class="mr-4">View</span>
                <span class="mr-4">Favorites</span>
                <span class="mr-4">Tools</span>
                <span>Help</span>
            </div>
            
            <!-- Toolbar -->
            <div class="bg-gray-300 p-1 flex items-center pixel-border">
                <div class="flex space-x-1 mr-4">
                    <div class="w-6 h-6 bg-gray-200 window flex items-center justify-center cursor-pointer" title="Back" onclick="browserBack()">
                        <span class="text-black">←</span>
                    </div>
                    <div class="w-6 h-6 bg-gray-200 window flex items-center justify-center cursor-pointer" title="Forward" onclick="browserForward()">
                        <span class="text-black">→</span>
                    </div>
                    <div class="w-6 h-6 bg-gray-200 window flex items-center justify-center cursor-pointer" title="Stop">
                        <span class="text-black">■</span>
                    </div>
                    <div class="w-6 h-6 bg-gray-200 window flex items-center justify-center cursor-pointer" title="Refresh" onclick="reloadBrowser()">
                        <span class="text-black">↻</span>
                    </div>
                    <div class="w-6 h-6 bg-gray-200 window flex items-center justify-center cursor-pointer" title="Home" onclick="navigateToHome()">
                        <span class="text-black">⌂</span>
                    </div>
                </div>
                
                <!-- Quick links -->
                <div class="flex space-x-1 mr-4">
                    <div class="w-6 h-6 bg-blue-500 window flex items-center justify-center cursor-pointer" title="Google" onclick="navigateToGoogle()">
                        <span class="text-white text-xs font-bold">G</span>
                    </div>
                    <div class="w-6 h-6 bg-blue-200 window flex items-center justify-center cursor-pointer" title="Police Site" onclick="navigateToPolice()">
                        <span class="text-black text-xs font-bold">P</span>
                    </div>
                    <div class="w-6 h-6 bg-red-200 window flex items-center justify-center cursor-pointer" title="News Article" onclick="navigateToNews()">
                        <span class="text-black text-xs font-bold">N</span>
                    </div>
                    <div class="w-6 h-6 bg-yellow-200 window flex items-center justify-center cursor-pointer" title="Wanted People" onclick="navigateToWanted()">
                        <span class="text-black text-xs font-bold">W</span>
                    </div>
                    <div class="w-6 h-6 bg-purple-200 window flex items-center justify-center cursor-pointer" title="BlackMire Studios" onclick="navigateToBlackMire()">
                        <span class="text-black text-xs font-bold">B</span>
                    </div>
                    <div class="w-6 h-6 bg-red-600 window flex items-center justify-center cursor-pointer" title="Emergency Call" onclick="navigateToEmergency()">
                        <span class="text-white text-xs font-bold">E</span>
                    </div>
                    <div class="w-6 h-6 bg-blue-400 window flex items-center justify-center cursor-pointer" title="Social Network" onclick="navigateToSocialNetwork()">
                        <span class="text-white text-xs font-bold">S</span>
                    </div>
                </div>
                
                <!-- Address bar -->
                <div class="flex-1 flex items-center">
                    <span class="text-black text-sm mr-2">Address:</span>
                    <input type="text" id="browser-address" class="flex-grow bg-white text-black p-1 pixel-border focus:outline-none" value="http://">
                    <button onclick="navigateBrowser()" class="btn-3d bg-blue-700 text-white px-2 ml-1">Go</button>
                </div>
            </div>
            
            <!-- Main content -->
            <div id="browser-content" class="p-4 bg-white pixel-border min-h-[600px]" style="max-height: 70vh; overflow-y: auto;">
                <div class="p-6 bg-white text-black">
                    <!-- Official Header -->
                    <div class="text-center mb-8 border-b-2 border-blue-800 pb-4">
                        <div class="flex justify-center items-center mb-3">
                            <div class="w-16 h-16 bg-blue-800 rounded-full flex items-center justify-center mr-4 window">
                                <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                                </svg>
                            </div>
                            <div>
                                <div class="text-3xl font-bold text-blue-800">BROOKVALE POLICE DEPARTMENT</div>
                                <div class="text-lg text-gray-600">Serving and Protecting Since 1897</div>
                                <div class="text-sm text-gray-500 mt-1">Official Law Enforcement Website</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Navigation Menu -->
                    <div class="flex justify-center mb-8 bg-blue-800 text-white p-2 window">
                        <div class="flex space-x-6">
                            <div class="cursor-pointer hover:underline" onclick="navigateToPolice()">Home</div>
                            <div class="cursor-pointer hover:underline" onclick="navigateToWanted()">Wanted Persons</div>
                            <div class="cursor-pointer hover:underline" onclick="navigateToEmergency()">Emergency Services</div>
                            <div class="cursor-pointer hover:underline">Crime Prevention</div>
                            <div class="cursor-pointer hover:underline">Community Outreach</div>
                        </div>
                    </div>
                    
                    <!-- Urgent Notice -->
                    <div class="bg-red-100 border-l-4 border-red-500 p-4 window mb-6">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-red-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <p class="font-bold text-red-800">URGENT BULLETIN</p>
                                <p class="text-red-700">We are actively investigating the Neverland Circus fire incident. Anyone with information is urged to contact our tip line immediately at 555-TIPS. All information will remain confidential.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Services Grid -->
                    <div class="grid grid-cols-4 gap-4 mb-8">
                        <div class="p-4 bg-blue-50 border border-blue-200 window text-center cursor-pointer hover:bg-blue-100 transition-colors" onclick="navigateToWanted()">
                            <div class="text-3xl mb-3">🔍</div>
                            <div class="font-bold text-blue-800 mb-2">Wanted Persons</div>
                            <div class="text-sm text-gray-600">View individuals wanted for questioning in ongoing investigations</div>
                        </div>
                        <div class="p-4 bg-blue-50 border border-blue-200 window text-center cursor-pointer hover:bg-blue-100 transition-colors" onclick="navigateToEmergency()">
                            <div class="text-3xl mb-3">📞</div>
                            <div class="font-bold text-blue-800 mb-2">Emergency Services</div>
                            <div class="text-sm text-gray-600">Immediate assistance and emergency contact information</div>
                        </div>
                        <div class="p-4 bg-blue-50 border border-blue-200 window text-center cursor-pointer hover:bg-blue-100 transition-colors">
                            <div class="text-3xl mb-3">🏢</div>
                            <div class="font-bold text-blue-800 mb-2">Station Directory</div>
                            <div class="text-sm text-gray-600">Locations and contact information for all precincts</div>
                        </div>
                        <div class="p-4 bg-blue-50 border border-blue-200 window text-center cursor-pointer hover:bg-blue-100 transition-colors" onclick="navigateToSocialNetwork()">
                            <div class="text-3xl mb-3">👥</div>
                            <div class="font-bold text-blue-800 mb-2">FriendNet</div>
                            <div class="text-sm text-gray-600">Connect with the community social network</div>
                        </div>
                    </div>
                    
                    <!-- Recent Activities -->
                    <div class="mb-8">
                        <div class="font-bold text-xl text-blue-800 mb-4 border-b pb-2">RECENT DEPARTMENT ACTIVITIES</div>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="p-3 bg-gray-50 border border-gray-200 window">
                                <div class="font-bold text-blue-700">Increased Patrols in Downtown Area</div>
                                <div class="text-sm text-gray-600">Additional officers have been deployed to ensure public safety following recent incidents.</div>
                            </div>
                            <div class="p-3 bg-gray-50 border border-gray-200 window">
                                <div class="font-bold text-blue-700">Neverland Circus Fire Investigation</div>
                                <div class="text-sm text-gray-600">Our arson unit is actively investigating the cause of the recent fire. Multiple witnesses have been interviewed.</div>
                            </div>
                            <div class="p-3 bg-gray-50 border border-gray-200 window">
                                <div class="font-bold text-blue-700">Community Safety Meeting</div>
                                <div class="text-sm text-gray-600">A public meeting is scheduled for November 20th at City Hall to address community concerns.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div class="border-t border-gray-300 pt-4 text-center text-sm text-gray-600">
                        <div class="mb-2">Brookvale Police Department © 1897</div>
                        <div class="flex justify-center space-x-4">
                            <span>Privacy Policy</span>
                            <span>|</span>
                            <span>Terms of Use</span>
                            <span>|</span>
                            <span>Accessibility</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Status bar -->
            <div class="bg-gray-500 text-white p-1 flex justify-between pixel-border">
                <span id="browser-status">Done</span>
                <span>Internet</span>
            </div>
        </div>
    </div>

    <!-- USB Password Window (initially hidden) -->
    <div id="usb-password-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">USB Drive - Password Required</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeUsbPasswordWindow()">×</div>
                </div>
            </div>
            
            <!-- Content area -->
            <div class="p-4 bg-gray-200 pixel-border">
                <div class="text-center mb-4">
                    <div class="w-16 h-16 bg-purple-600 flex items-center justify-center mx-auto window mb-2">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                        </svg>
                    </div>
                    <p class="text-black mb-2">This USB drive is password protected.</p>
                    <p class="text-black font-bold">Please enter the password to continue:</p>
                </div>
                
                <div class="mb-4">
                    <input type="password" id="usb-password-input" class="w-full p-2 pixel-border bg-white text-black focus:outline-none" placeholder="Enter password...">
                    <p id="usb-password-error" class="text-red-600 text-sm mt-1 hidden">Incorrect password. Please try again.</p>
                </div>
                
                <button onclick="checkUsbPassword()" class="btn-3d bg-blue-700 text-white px-4 py-2 w-full">
                    Unlock USB Drive
                </button>
            </div>
        </div>
    </div>

    <!-- Hard Drive Window (initially hidden) -->
    <div id="hard-drive-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">Hard Drive (C:)</h1>
                </div>
                <div class="极">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeHardDriveWindow()">×</div>
                </div>
            </div>
            
            <!-- Menu bar -->
            <div class="bg-blue-300 text-blue-900 p-1 flex pixel-border">
                <span class="mr-4">File</span>
                <span class="mr-4">Edit</span>
                <span class="mr-4">View</span>
                <span>Help</span>
            </div>
            
            <!-- Toolbar -->
            <div class="bg-gray-300 p-1 flex items-center pixel-border">
                <div class="w-6 h-6 bg-gray-200 mr-2 window flex items-center justify-center cursor-pointer" title="Up">
                    <span class="text-black">↑</span>
                </div>
                <div class="w-6 h-6 bg-gray-200 mr-4 window flex items-center justify-center cursor-pointer" title="Refresh">
                    <span class="text-black">↻</span>
                </div>
                <div class="text-black text-sm">C:\</div>
            </div>
            
            <!-- Main content -->
            <div class="p-4 bg-gray-200 pixel-border min-h-[400px] flex">
                <!-- Sidebar -->
                <div class="w-1/4 bg-gray-300 p-2 mr-4 window">
                    <div class="text-black font-bold mb-2">Folders</div>
                    <div class="text-blue-800 cursor-pointer">Desktop</div>
                    <div class="text-blue-800 cursor-pointer">My Documents</div>
                    <div class="text-blue-800 cursor-pointer font-bold">Hard Drive (C:)</div>
                    <div class="text-blue-800 cursor-pointer">My Computer</div>
                    <div class="text-blue-800 cursor-pointer">Network</div>
                    <div class="text-blue-800 cursor-pointer">Recycle Bin</div>
                </div>
                
                <!-- File area -->
                <div class="flex-1 grid grid-cols-4 gap-2">
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Windows</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Program Files</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Documents</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-blue-300 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📄</span>
                        </div>
                        <span class="text-black text-xs">autoexec.bat</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-blue-300 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📄</span>
                        </div>
                        <span class="text-black text-xs">config.sys</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-blue-300 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📄</span>
                        </div>
                        <span class="text-black text-xs">readme.txt</span>
                    </div>
                </div>
            </div>
            
            <!-- Status bar -->
            <div class="bg-gray-500 text-white p-1 flex justify-between pixel-border">
                <span>6 objects</span>
                <span>C:\</span>
            </div>
        </div>
    </div>

    <!-- USB Window (initially hidden) -->
    <div id="usb-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">USB Drive (F:)</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeUsbWindow()">×</div>
                </div>
            </div>
            
            <!-- Menu bar -->
            <div class="bg-blue-300 text-blue-900 p-1 flex pixel-border">
                <span class="mr-4">File</span>
                <span class="mr-4">Edit</span>
                <span class="mr-4">View</span>
                <span>Help</span>
            </div>
            
            <!-- Toolbar -->
            <div class="bg-gray-300 p-1 flex items-center pixel-border">
                <div class="w-6 h-6 bg-gray-200 mr-2 window flex items-center justify-center cursor-pointer" title="Up">
                    <span class="text-black">↑</span>
                </div>
                <div class="w-6 h-6 bg-gray-200 mr-4 window flex items-center justify-center cursor-pointer" title="Refresh">
                    <span class="text-black">↻</span>
                </div>
                <div class="text-black text-sm">F:\</div>
            </div>
            
            <!-- Main content -->
            <div class="p-4 bg-gray-200 pixel-border min-h-[400px] flex">
                <!-- Sidebar -->
                <div class="w-1/4 bg-gray-300 p-2 mr-4 window">
                    <div class="text-black font-bold mb-2">Folders</div>
                    <div class="text-blue-800 cursor-pointer">Desktop</div>
                    <div class="text-blue-800 cursor-pointer">My Documents</div>
                    <div class="text-blue-800 cursor-pointer">My Computer</div>
                    <div class="text-blue-800 cursor-pointer font-bold">USB Drive (F:)</div>
                    <div class="text-blue-800 cursor-pointer">Network</div>
                    <div class="text-blue-800 cursor-pointer">Recycle Bin</div>
                </div>
                
                <!-- File area -->
                <div class="flex-1 grid grid-cols-4 gap-2">
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Documents</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Photos</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-yellow-400 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📁</span>
                        </div>
                        <span class="text-black text-xs">Backups</span>
                    </div>
                    <div class="text-center cursor-pointer" onclick="openUsbNotepadFile()">
                        <div class="w-16 h-16 bg-blue-300 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📄</span>
                        </div>
                        <span class="text-black text-xs">readme.txt</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-green-300 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📄</span>
                        </div>
                        <span class="text-black text-xs">evidence.txt</span>
                    </div>
                    <div class="text-center cursor-pointer">
                        <div class="w-16 h-16 bg-red-300 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📄</span>
                        </div>
                        <span class="text-black text-xs">warning.txt</span>
                    </div>
                    <div class="text-center cursor-pointer" onclick="openChatPassHintFile()">
                        <div class="w-16 h-16 bg-purple-300 flex items-center justify-center mx-auto window">
                            <span class="text-black text-2xl">📄</span>
                        </div>
                        <span class="text-black text-xs">chat-pass-hint.txt</span>
                    </div>
                </div>
            </div>
            
            <!-- Status bar -->
            <div class="bg-gray-500 text-white p-1 flex justify-between pixel-border">
                <span>6 objects</span>
                <span>F:\</span>
            </div>
        </div>
    </div>

    <!-- Database Window (initially hidden) -->
    <div id="database-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">Database Explorer</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeDatabaseWindow()">×</div>
                </div>
            </div>
            
            <!-- Menu bar -->
            <div class="bg-blue-300 text-blue-900 p-1 flex pixel-border">
                <span class="mr-4">File</span>
                <span class="mr-4">Edit</span>
                <span class="mr-4">View</span>
                <span>Help</span>
            </div>
            
            <!-- Toolbar -->
            <div class="bg-gray-300 p-1 flex items-center pixel-border">
                <div class="w-6 h-6 bg-gray-200 mr-2 window flex items-center justify-center cursor-pointer" title="Up">
                    <span class="text-black">↑</span>
                </div>
                <div class="w-6 h-6 bg-gray-200 mr-4 window flex items-center justify-center cursor-pointer" title="Refresh">
                    <span class="text-black">↻</span>
                </div>
                <div class="text-black text-sm">Database Connection: localhost</div>
            </div>
            
            <!-- Main content -->
            <div class="p-4 bg-gray-200 pixel-border min-h-[400px] flex">
                <!-- Sidebar -->
                <div class="w-1/4 bg-gray-300 p-2 mr-4 window">
                    <div class="text-black font-bold mb-2">Database Objects</div>
                    <div class="text-blue-800 cursor-pointer">Tables</div>
                    <div class="text-blue-800 cursor-pointer">Views</div>
                    <div class="text-blue-800 cursor-pointer">Stored Procedures</div>
                    <div class="text-blue-800 cursor-pointer">Functions</div>
                    <div class="text-blue-800 cursor-pointer">Users</div>
                </div>
                
                <!-- Content area -->
                <div class="flex-1">
                    <div class="window p-2 mb-4">
                        <div class="text-black font-bold">Circus Investigation Database</div>
                        <div class="text-sm text-gray-600">Connected to: localhost\SQLEXPRESS</div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-2">
                        <div class="window p-2 cursor-pointer">
                            <div class="text-black font-bold">Witness Statements</div>
                            <div class="text-sm">245 records</div>
                        </div>
                        <div class="window p-2 cursor-pointer">
                            <div class="text-black font-bold">Evidence Log</div>
                            <div class="text-sm">78 records</div>
                        </div>
                        <div class="window p-2 cursor-pointer">
                            <div class="text-black font-bold">Suspect Profiles</div>
                            <div class="text-sm">12 records</div>
                        </div>
                        <div class="window p-2 cursor-pointer">
                            <div class="text-black font-bold">Security Footage</div>
                            <div class="text-sm">48 files</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Status bar -->
            <div class="bg-gray-500 text-white p-1 flex justify-between pixel-border">
                <span>Ready</span>
                <span>Connected</span>
            </div>
        </div>
    </div>

    <!-- Database V4 Window (initially hidden) -->
    <div id="database-v4-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-4xl mx-auto hidden" style="max-height: 90vh;">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">NeverLand Database V4</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="toggleDatabaseV4FullScreen()">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeDatabaseV4Window()">×</div>
                </div>
            </div>
            
            <!-- Content area -->
            <div class="p-1 bg-white pixel-border" style="height: 600px;">
                <iframe id="database-v4-iframe" src="about:blank" class="w-full h-full border-none" frameborder="0"></iframe>
            </div>
            
            <!-- Status bar -->
            <div class="bg-gray-500 text-white p-1 flex justify-between pixel-border">
                <span id="database-v4-status">Ready</span>
                <span>NeverLand Database V4</span>
            </div>
        </div>
    </div>

    <!-- CMD Window (initially hidden) -->
    <div id="cmd-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">Command Prompt</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeCmdWindow()">×</div>
                </div>
            </div>
            
            <!-- Menu bar -->
            <div class="bg-blue-300 text-blue-900 p-1 flex pixel-border">
                <span class="mr-4">File</span>
                <span class="mr-4">Edit</span>
                <span class="mr-4">Options</span>
                <span>Help</span>
            </div>
            
            <!-- Main content -->
            <div class="p-2 bg-black text-green-500 pixel-border min-h-[400px] flex flex-col font-mono">
                <div id="cmd-output" class="flex-grow overflow-y-auto mb-2 h-80 space-y-1 p-2">
                    <div>Microsoft(R) Windows 95</div>
                    <div>(C)Copyright Microsoft Corp 1981-1995.</div>
                    <div>C:\></div>
                </div>
                
                <!-- Input area -->
                <div class="flex items-center">
                    <span class="text-green-500 mr-2">C:\></span>
                    <input type="text" id="cmd-input" class="flex-grow bg-black text-green-500 p-1 focus:outline-none border-none font-mono" autocomplete="off" onkeypress="handleCmdInput(event)">
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Password Window (initially hidden) -->
    <div id="chat-password-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">Anonymous Chat - Password Required</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeChatPasswordWindow()">×</div>
                </div>
            </div>
            
            <!-- Content area -->
            <div class="p-4 bg-gray-200 pixel-border">
                <div class="text-center mb-4">
                    <div class="w-16 h-16 bg-blue-700 flex items-center justify-center mx-auto window mb-2">
                        <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c极 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-极 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                        </svg>
                    </div>
                    <p class="text-black mb-2">This chat requires a 4-digit passcode.</p>
                    <p class="text-black font-bold">Please enter the passcode to continue:</p>
                </div>
                
                <div class="mb-4">
                    <input type="password" id="chat-password-input" class="w-full p-2 pixel-border bg-white text-black focus:outline-none" placeholder="Enter 4-digit passcode..." maxlength="4">
                    <p id="chat-password-error" class="text-red-600 text-sm mt-1 hidden">Incorrect passcode. Please try again.</p>
                </div>
                
                <button onclick="checkChatPassword()" class="btn-3d bg-blue-700 text-white px-4 py-2 w-full">
                    Access Chat
                </button>
            </div>
        </div>
    </div>

    <!-- Chat Window (initially hidden) -->
    <div id="chat-window" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-2xl mx-auto hidden">
        <div class="window bg-blue-900 p-1">
            <!-- Title bar -->
            <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-red-500 mr-2"></div>
                    <h1 class="text-white text-xl">Anonymous Chat v1.0</h1>
                </div>
                <div class="flex">
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">_</div>
                    <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold">□</div>
                    <div class="w-6 h-6 bg-red-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="closeChatWindow()">×</div>
                </div>
            </div>
            
            <!-- Menu bar -->
            <div class="bg-blue-300 text-blue-900 p-1 flex pixel-border">
                <span class="mr-4">File</span>
                <span class="mr-4">Edit</span>
                <span class="mr-4">Options</span>
                <span>Help</span>
            </div>
            
            <!-- Main content -->
            <div class="p-4 bg-black pixel-border min-h-[400px] flex">
                <!-- Contact List Sidebar -->
                <div class="w-1/4 bg-gray-800 p-2 mr-4 window">
                    <div class="text-white font-bold mb-2">Contacts (6)</div>
                    <div class="space-y-1">
                        <div class="text-green-400 cursor-pointer">Stranger_01</div>
                        <div class="text-blue-400 cursor-pointer">Claire</div>
                        <div class="text-gray-400 cursor-not-allowed">Detective_Mike</div>
                        <div class="text-gray-400 cursor-not-allowed">Operator_42</div>
                        <div class="text-gray-400 cursor-not-allowed">Charlie</div>
                        <div class="text-gray-400 cursor-not-allowed">MRE</div>
                    </div>
                </div>

                <!-- Chat Area -->
                <div class="flex-1 flex flex-col">
                <!-- Status bar -->
                <div class="bg-gray-500 text-white p-1 mb-2 flex justify-between">
                    <span>Connected to: BBS-ANON-CHAT-01</span>
                    <span id="time-display">14:30:45</span>
                </div>
                
                <!-- Chat area -->
                <div id="chat-container" class="flex-grow overflow-y-auto mb-4 h-80 space-y-2 p-2 bg-gray-100 border border-gray-400">
                    <div class="message-in p-2">
                        <span class="text-blue-700 font-bold">Stranger_01:</span> Hello there! Who are you?
                    </div>
                    <div class="message-out p-2 hidden">
                        <span class="text-green-700 font-bold">Mike T.:</span> <span>Initializing chat...</span>
                    </div>
                </div>
                
                <!-- Response options area -->
                <div id="response-options" class="grid grid-cols-2 gap-2 mb-4 hidden">
                    <!-- Options will be generated here -->
                </div>
                
                <!-- Status indicator -->
                <div class="text-center text-gray-500 mb-2" id="typing-status">
                    Stranger_01 is typing...
                </div>
                
                <!-- Footer -->
                <div class="mt-4 text-center text-gray-500">
                    <p>Press F1 for help | Alt+X to exit | Page Up/Down to scroll</p>
                </div>
            </div>
        </div>
        
        </div>
    </div>

    <script>
        // Login functionality
        function checkLoginPassword() {
            const password = document.getElementById('login-password').value;
            const errorElement = document.getElementById('login-error');
            
            if (password === 'password') {
                // Hide login screen and show desktop
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('desktop-content').classList.remove('hidden');
            } else {
                // Show error message
                errorElement.classList.remove('hidden');
                // Clear password field
                document.getElementById('login-password').value = '';
                // Focus back on password field
                document.getElementById('login-password').focus();
            }
        }
        
        // Add Enter key support for login password input
        document.getElementById('login-password').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkLoginPassword();
            }
        });
        
        // Function to toggle start menu
        function toggleStartMenu() {
            const startMenu = document.getElementById('start-menu');
            startMenu.classList.toggle('hidden');
        }

        // Function to open CMD window
        function openCmdWindow() {
            document.getElementById('cmd-window').classList.remove('hidden');
            // Focus on input field
            setTimeout(() => {
                document.getElementById('cmd-input').focus();
            }, 100);
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }
        
        // Function to open CMD passcode file
        function openCmdPasscodeFile() {
            const notepadWindow = document.getElementById('notepad-window');
            const textarea = notepadWindow.querySelector('textarea');
            
            // Set CMD passcode content
            textarea.value = `To retrieve the passcode:\n\n1. Open Command Prompt\n2. Type: give-pass-code\n3. Press Enter\n\nThis will display the secure passcode needed to access protected files.`;
            
            // Show the notepad window
            notepadWindow.classList.remove('hidden');
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }
        
        // Function to open video in browser
        function openVideoWindow() {
            // Open the browser window
            document.getElementById('browser-window').classList.remove('hidden');
            // Navigate to the YouTube homepage
            navigateToPage("https://www.youtube.com/");
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }
        
        // Function to open specific YouTube video
        function openYouTubeVideo() {
            // Open the browser window
            document.getElementById('browser-window').classList.remove('hidden');
            // Navigate to the specific YouTube video
            navigateToPage("https://www.youtube.com/watch?v=gSjTZ6hwiRI&list=RDgSjTZ6hwiRI&start_radio=1");
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }
        
        // Function to open DVD window
        function openDvdWindow() {
            // Open the browser window
            document.getElementById('browser-window').classList.remove('hidden');
            // Show the DVD menu with two options
            showDvdMenu();
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }

        // Function to open hard drive window
        function openHardDriveWindow() {
            document.getElementById('hard-drive-window').classList.remove('hidden');
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }

        // Function to close hard drive window
        function closeHardDriveWindow() {
            document.getElementById('hard-drive-window').classList.add('hidden');
        }

        // Function to open database window
        function openDatabaseWindow() {
            document.getElementById('database-window').classList.remove('hidden');
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }

        // Function to close database window
        function closeDatabaseWindow() {
            document.getElementById('database-window').classList.add('hidden');
        }
        
        // Function to show DVD menu with two options
        function showDvdMenu() {
            // Update the address bar
            document.getElementById('browser-address').value = 'http://dvd-menu.local';
            
            // Set the browser content to show DVD menu
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 bg-white text-black">
                    <div class="text-center mb-6">
                        <div class="text-2xl font-bold mb-2">DVD Menu</div>
                        <div class="text-gray-500">Select a video to play</div>
                    </div>
                    
                    <div class="grid grid-cols-1 gap-4 max-w-md mx-auto">
                        <button onclick="navigateToPage('https://www.youtube.com/watch?v=PMBWtZ-sDlY&list=RDPMBWtZ-sDlY&start_radio=1')" 
                                class="btn-3d bg-blue-700 text-white p-4 text-left window">
                            <div class="font-bold">Video 1</div>
                            <div class="text-sm">Classic DVD Experience</div>
                        </button>
                        
                        <button onclick="navigateToPage('https://www.youtube.com/watch?v=AG56t8t9iW8&list=RDAG56t8t9iW8&start_radio=1')" 
                                class="btn-3d bg-blue-700 text-white p-4 text-left window">
                            <div class="font-bold">Video 2</div>
                            <div class="text-sm">Special Content</div>
                        </button>
                    </div>
                </div>
            `;
            
            // Update browser status
            document.getElementById('browser-status').textContent = 'Done';
        }
        
        // Function to open USB password window
        function openUsbWindow() {
            document.getElementById('usb-password-window').classList.remove('hidden');
            // Focus on password input field
            setTimeout(() => {
                document.getElementById('usb-password-input').focus();
            }, 100);
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }
        
        // Function to close USB password window
        function closeUsbPasswordWindow() {
            document.getElementById('usb-password-window').classList.add('hidden');
            // Clear password field and error message
            document.getElementById('usb-password-input').value = '';
            document.getElementById('usb-password-error').classList.add('hidden');
        }
        
        // Function to check USB password
        function checkUsbPassword() {
            const password = document.getElementById('usb-password-input').value;
            const errorElement = document.getElementById('usb-password-error');
            
            if (password === '101987') {
                // Close password window and open USB window
                closeUsbPasswordWindow();
                document.getElementById('usb-window').classList.remove('hidden');
            } else {
                // Show error message
                errorElement.classList.remove('hidden');
                // Clear password field
                document.getElementById('usb-password-input').value = '';
                // Focus back on password field
                document.getElementById('usb-password-input').focus();
            }
        }
        
        // Function to close USB window
        function closeUsbWindow() {
            document.getElementById('usb-window').classList.add('hidden');
        }
        
        // Function to open USB notepad file
        function openUsbNotepadFile() {
            // Create a new notepad window with USB content
            const notepadWindow = document.getElementById('notepad-window');
            const textarea = notepadWindow.querySelector('textarea');
            
            // Set USB-specific content
            textarea.value = `USB DRIVE CONTENTS - ACCESSED\n\n` +
                            `This USB contains sensitive information about the Neverland circus case.\n\n` +
                            `EVIDENCE FOUND:\n` +
                            `- Security footage timestamp discrepancies\n` +
                            `- Financial records showing unusual transactions\n` +
                            `- Witness statements that contradict official reports\n\n` +
                            `WARNING: This information could be dangerous in the wrong hands.\n` +
                            `Keep this drive secure and only share with trusted investigators.`;
            
            // Show the notepad window
            notepadWindow.classList.remove('hidden');
            // Close USB window
            closeUsbWindow();
        }

        // Function to open chat password hint file
        function openChatPassHintFile() {
            const notepadWindow = document.getElementById('notepad-window');
            const textarea = notepadWindow.querySelector('textarea');
            
            textarea.value = `CHAT PASSWORD HINT\n\n` +
                            `The password for the anonymous chat is related to Halloween.\n` +
                            `Specifically, it's the date of Halloween: 10/31\n\n` +
                            `Use this information to access the secure chat system.`;
            
            notepadWindow.classList.remove('hidden');
            closeUsbWindow();
        }
        
        // Function to close CMD window
        function closeCmdWindow() {
            document.getElementById('cmd-window').classList.add('hidden');
        }
        
        // Function to open Database V4 window
        function openDatabaseV4Window() {
            const databaseWindow = document.getElementById('database-v4-window');
            const iframe = document.getElementById('database-v4-iframe');
            
            // Load the actual database URL
            iframe.src = 'https://sites.google.com/view/neverland-database/pagina-de-pornire';
            
            // Show the window
            databaseWindow.classList.remove('hidden');
            
            // Update status
            document.getElementById('database-v4-status').textContent = 'Loading database...';
            
            // Handle when the iframe loads
            iframe.onload = function() {
                document.getElementById('database-v4-status').textContent = 'Database loaded';
            };
            
            // Handle iframe errors
            iframe.onerror = function() {
                document.getElementById('database-v4-status').textContent = 'Error loading database';
                // Create a fallback content display
                iframe.srcdoc = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>NeverLand Database V4 - Error</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                background: #000080; 
                                color: white; 
                                padding: 20px;
                            }
                            .error { 
                                background: #800000; 
                                padding: 20px; 
                                border: 2px solid #c0c0c0;
                                margin: 20px;
                            }
                        </style>
                    </head>
                    <body>
                        <h1>NeverLand Database V4</h1>
                        <div class="error">
                            <h2>Connection Error</h2>
                            <p>Unable to load the database interface. This could be due to:</p>
                            <ul>
                                <li>Network connectivity issues</li>
                                <li>Database server maintenance</li>
                                <li>Security restrictions</li>
                            </ul>
                            <p>Please try again later or contact system administration.</p>
                        </div>
                        <h3>Recent Database Entries (Sample Data):</h3>
                        <table border="1" cellpadding="5" cellspacing="0" width="100%">
                            <tr bgcolor="#0000FF">
                                <th>ID</th><th>Date</th><th>Type</th><th>Description</th>
                            </tr>
                            <tr>
                                <td>NV-2023-001</td><td>10/31/2023</td><td>Incident</td><td>Circus fire investigation started</td>
                            </tr>
                            <tr>
                                <td>NV-2023-002</td><td>11/01/2023</td><td>Evidence</td><td>Security footage recovered</td>
                            </tr>
                            <tr>
                                <td>NV-2023-003</td><td>11/02/2023</td><td>Witness</td><td>Eyewitness interview conducted</td>
                            </tr>
                        </table>
                    <p style="border-radius: 8px; text-align: center; font-size: 12px; color: #fff; margin-top: 16px;position: fixed; left: 8px; bottom: 8px; z-index: 10; background: rgba(0, 0, 0, 0.8); padding: 4px 8px;">Made with <img src="https://enzostvs-deepsite.hf.space/logo.svg" alt="DeepSite Logo" style="width: 16px; height: 16px; vertical-align: middle;display:inline-block;margin-right:3px;filter:brightness(0) invert(1);"><a href="https://enzostvs-deepsite.hf.space" style="color: #fff;text-decoration: underline;" target="_blank" >DeepSite</a> - 🧬 <a href="https://enzostvs-deepsite.hf.space?remix=44444t/sinister-chat-box" style="color: #fff;text-decoration: underline;" target="_blank" >Remix</a></p></body>
                    </html>
                `;
            };
        }
        
        // Function to close Database V4 window
        function closeDatabaseV4Window() {
            const databaseWindow = document.getElementById('database-v4-window');
            const iframe = document.getElementById('database-v4-iframe');
            
            // Clear the iframe source
            iframe.src = 'about:blank';
            
            // Hide the window
            databaseWindow.classList.add('hidden');
        }
        
        // Function to toggle Database V4 full screen
        function toggleDatabaseV4FullScreen() {
            const databaseWindow = document.getElementById('database-v4-window');
            
            if (!document.fullscreenElement) {
                if (databaseWindow.requestFullscreen) {
                    databaseWindow.requestFullscreen();
                } else if (databaseWindow.webkitRequestFullscreen) {
                    databaseWindow.webkitRequestFullscreen();
                } else if (databaseWindow.msRequestFullscreen) {
                    databaseWindow.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }
        
        // Function to open Messenger window
        function openMessengerWindow() {
            // Create a new window for Messenger
            const messengerWindow = document.createElement('div');
            messengerWindow.className = 'fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50';
            messengerWindow.style.zIndex = '1000';
            
            // Get the list of friends from the FriendNet page
            const friendsList = Array.from(document.querySelectorAll('#friends-online-list > div')).map(friend => {
                return {
                    name: friend.querySelector('.text-sm').textContent,
                    status: friend.querySelector('.ml-auto').classList.contains('bg-green-500') ? 'online' : 'offline'
                };
            });
            
            // Create the Messenger interface
            messengerWindow.innerHTML = `
                <div class="window bg-white w-full max-w-md mx-4" style="max-height: 80vh;">
                    <!-- Title bar -->
                    <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-blue-500 mr-2 flex items-center justify-center">
                                <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 极 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                                </svg>
                            </div>
                            <h1 class="text-white text-xl">Meta Messenger</h1>
                        </div>
                        <div class="flex">
                            <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="this.parentElement.parentElement.parentElement.parentElement.remove()">×</div>
                        </div>
                    </div>
                    
                    <!-- Content area -->
                    <div class="p-4 bg-gray-100" style="max-height: 60vh; overflow-y: auto;">
                        <div class="window bg-white p-3 mb-4">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-3">M</div>
                                <div>
                                    <div class="font-bold">Meta Messenger</div>
                                    <div class="text-sm text-gray-600">Connected to FriendNet</div>
                                </div>
                            </div>
                            <p class="text-sm text-gray-700">
                                Secure messaging platform with end-to-end encryption. Messages are delivered instantly across the FriendNet network.
                            </p>
                        </div>
                        
                        <div class="font-bold mb-3 text-blue-800">Online Contacts (${friendsList.filter(f => f.status === 'online').length})</div>
                        
                        <div class="space-y-2">
                            ${friendsList.map(friend => `
                                <div class="flex items-center p-3 window bg-white cursor-pointer hover:bg-blue-50 transition-colors" onclick="openMessengerChat('${friend.name}')">
                                    <div class="relative mr-3">
                                        <div class="w-10 h-10 ${friend.status === 'online' ? 'bg-green-400' : 'bg-gray-300'} rounded-full flex items-center justify-center text-white font-bold">
                                            ${friend.name.charAt(0)}
                                        </div>
                                        <div class="absolute -bottom-1 -right-1 w-3 h-3 ${friend.status === 'online' ? 'bg-green-500' : 'bg-gray-400'} rounded-full border-2 border-white"></div>
                                    </div>
                                    <div class="flex-1">
                                        <div class="font-bold text-sm">${friend.name}</div>
                                        <div class="text-xs ${friend.status === 'online' ? 'text-green-600' : 'text-gray-500'}">${friend.status === 'online' ? 'Online now' : 'Last seen today'}</div>
                                    </div>
                                    <div class="w-2 h-2 ${friend.status === 'online' ? 'bg-green-500' : 'bg-gray-400'} rounded-full"></div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- Status bar -->
                    <div class="bg-gray-300 p-2 text-xs text-gray-700 pixel-border flex justify-between">
                        <span>Secure connection established</span>
                        <span>${new Date().toLocaleTimeString()}</span>
                    </div>
                </div>
            `;
            
            document.body.appendChild(messengerWindow);
            
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
        }
        
        // Function to close chat password window
        function closeChatPasswordWindow() {
            document.getElementById('chat-password-window').classList.add('hidden');
            // Clear password field and error message
            document.getElementById('chat-password-input').value = '';
            document.getElementById('chat-password-error').classList.add('hidden');
        }

        // Function to check chat password
        function checkChatPassword() {
            const password = document.getElementById('chat-password-input').value;
            const errorElement = document.getElementById('chat-password-error');
            
            if (password === '1031') {
                // Close password window and open chat window
                closeChatPasswordWindow();
                document.getElementById('chat-window').classList.remove('hidden');
                // Show contact list instead of starting chat immediately
                showContactList();
            } else {
                // Show error message
                errorElement.classList.remove('hidden');
                // Clear password field
                document.getElementById('chat-password-input').value = '';
                // Focus back on password field
                document.getElementById('chat-password-input').focus();
            }
        }

        // Function to show contact list
        function showContactList() {
            // Hide chat area and show contact list in full view
            document.getElementById('chat-container').classList.add('hidden');
            document.querySelector('.flex-1.flex-col').classList.add('hidden');
            document.querySelector('.w-1\\/4').classList.remove('w-1/4');
            document.querySelector('.w-1\\/4').classList.add('w-full');
            document.querySelector('.w-1\\/4').classList.remove('mr-4');
            
            // Make all contacts clickable
            const contacts = document.querySelectorAll('.w-1\\/4 .text-green-400, .w-1\\/4 .text-gray-400');
            contacts.forEach(contact => {
                contact.classList.add('cursor-pointer');
                contact.classList.add('p-2');
                contact.classList.add('hover:bg-gray-700');
                contact.onclick = function() {
                    selectContact(this.textContent);
                };
            });
        }

        // Function to handle contact selection
        function selectContact(contactName) {
            // Reset chat window layout
            document.querySelector('.w-full').classList.remove('w-full');
            document.querySelector('.bg-gray-800').classList.add('w-1/4');
            document.querySelector('.bg-gray-800').classList.add('mr-4');
            document.getElementById('chat-container').classList.remove('hidden');
            document.querySelector('.flex-1.flex-col').classList.remove('hidden');
            
            // Update active contact styling
            const contacts = document.querySelectorAll('.w-1\\/4 > div > div');
            contacts.forEach(contact => {
                if (contact.textContent === contactName) {
                    contact.classList.remove('text-gray-400');
                    contact.classList.add('text-green-400');
                } else {
                    contact.classList.remove('text-green-400');
                    contact.classList.add('text-gray-400');
                }
            });
            
            // Start chat with selected contact
            setTimeout(() => startChat(contactName), 500);
        }

        // Function to close Messenger window
        function closeMessengerWindow() {
            document.getElementById('messenger-window').classList.add('hidden');
        }
        
        // Function to open a specific chat in Messenger
        function openMessengerChat(contactName) {
            document.getElementById('messenger-window').classList.remove('hidden');
            // Set the active contact
            document.getElementById('messenger-active-contact').textContent = contactName;
            // Clear chat messages
            document.getElementById('messenger-chat-messages').innerHTML = '';
            
            // Special handling for MRE - open in a separate chat window
            if (contactName === 'MRE') {
                openMREChatWindow();
                return;
            } else {
                // Normal messages for other contacts
                addMessengerMessage(`${contactName}: Hey there! This is a secure Messenger connection.`, false);
                addMessengerMessage('You: Hi! I wanted to ask you about the Neverland case.', true);
            }
            
            // Update contact list active state
            const contacts = document.querySelectorAll('#messenger-contacts .cursor-pointer');
            contacts.forEach(contact => {
                if (contact.textContent.includes(contactName)) {
                    contact.classList.add('bg-blue-100', 'font-bold');
                } else {
                    contact.classList.remove('bg-blue-100', 'font-bold');
                }
            });
        }

        // Function to open MRE chat window
        function openMREChatWindow() {
            // Create a new chat window for MRE
            const mreChatWindow = document.createElement('div');
            mreChatWindow.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-md mx-auto z-50';
            mreChatWindow.innerHTML = `
                <div class="window bg-blue-900 p-1">
                    <!-- Title bar -->
                    <div class="bg-blue-700 p-1 flex justify-between items-center pixel-border">
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-red-500 mr-2"></div>
                            <h1 class="text-white text-xl">Friend Messenger - MRE</h1>
                        </div>
                        <div class="flex">
                            <div class="w-6 h-6 bg-blue-500 ml-1 flex items-center justify-center text-white font-bold cursor-pointer" onclick="this.parentElement.parentElement.parentElement.remove()">×</div>
                        </div>
                    </div>
                    
                    <!-- Content area -->
                    <div class="p-4 bg-gray-100" style="max-height: 60vh; overflow-y: auto;">
                        <div class="window bg-white p-3 mb-4">
                            <div class="flex items-center mb-3">
                                <div class="w-10 h-10 bg-purple-300 rounded-full flex items-center justify-center text-white font-bold mr-3">M</div>
                                <div>
                                    <div class="font-bold">MRE</div>
                                    <div class="text-sm text-gray-600">Online now</div>
                                </div>
                            </div>
                            <p class="text-sm text-gray-700">
                                Secure messaging with end-to-end encryption. Messages are delivered instantly.
                            </p>
                        </div>
                        
                        <!-- Chat messages -->
                        <div id="mre-chat-messages" class="space-y-2 mb-4">
                            <div class="flex justify-start">
                                <div class="bg-gray-200 rounded-lg p-2 max-w-xs">
                                    <p class="text-sm">MRE: Sometimes fire is the only way to cleanse what's corrupted. Don't you agree?</p>
                                    <span class="text-xs text-gray-500">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Message input -->
                        <div class="flex items-center">
                            <input type="text" id="mre-message-input" class="flex-grow p-2 pixel-border bg-white text-black focus:outline-none" placeholder="Type your message...">
                            <button onclick="sendMREMessage()" class="btn-3d bg-blue-700 text-white px-3 py-2 ml-2">
                                Send
                            </button>
                        </div>
                    </div>
                    
                    <!-- Status bar -->
                    <div class="bg-gray-300 p-2 text-xs text-gray-700 pixel-border flex justify-between">
                        <span>Secure connection established</span>
                        <span>${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                    </div>
                </div>
            `;
            
            document.body.appendChild(mreChatWindow);
            
            // Focus on input field
            setTimeout(() => {
                document.getElementById('mre-message-input').focus();
            }, 100);
        }

        // Function to send message in MRE chat
        function sendMREMessage() {
            const input = document.getElementById('mre-message-input');
            const message = input.value.trim();
            
            if (message) {
                // Add user message
                const messagesContainer = document.getElementById('mre-chat-messages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'flex justify-end mb-2';
                messageDiv.innerHTML = `
                    <div class="bg-blue-100 rounded-lg p-2 max-w-xs">
                        <p class="text-sm">You: ${message}</p>
                        <span class="text-xs text-gray-500">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                    </div>
                `;
                messagesContainer.appendChild(messageDiv);
                input.value = '';
                
                // Scroll to bottom
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                // Simulate MRE response after a delay
                setTimeout(() => {
                    const responses = [
                        "MRE: Fire purifies everything it touches. It's nature's reset button.",
                        "MRE: You're asking about the Neverland fire, aren't you? It was necessary.",
                        "MRE: Some things need to be destroyed to make room for something new.",
                        "MRE: The police will never understand. They only see the destruction, not the purpose.",
                        "MRE: Do you believe in second chances? Some things don't deserve them.",
                        "MRE: I watched it burn. There was a certain beauty in the flames.",
                        "MRE: They called it a tragedy. I call it justice.",
                        "MRE: Sometimes the only way to fix something is to break it completely."
                    ];
                    
                    const responseDiv = document.createElement('div');
                    responseDiv.className = 'flex justify-start mb-2';
                    responseDiv.innerHTML = `
                        <div class="bg-gray-200 rounded-lg p-2 max-w-xs">
                            <p class="text-sm">${responses[Math.floor(Math.random() * responses.length)]}</p>
                            <span class="text-xs text-gray-500">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                        </div>
                    `;
                    messagesContainer.appendChild(responseDiv);
                    
                    // Scroll to bottom again
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 1000 + Math.random() * 2000);
            }
        }

        // Function to open MRE chat directly
        function openMREChat() {
            // Open messenger window
            openMessengerWindow();
            // Then open MRE chat
            setTimeout(() => {
                openMessengerChat('MRE');
            }, 100);
        }
        
        // Function to add a message to Messenger
        function addMessengerMessage(message, isUser = false) {
            const messagesContainer = document.getElementById('messenger-chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'} mb-2`;
            
            messageDiv.innerHTML = `
                <div class="${isUser ? 'bg-blue-100' : 'bg-gray-100'} rounded-lg p-2 max-w-xs">
                    <p class="text-sm">${message}</p>
                    <span class="text-xs text-gray-500">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Function to handle sending a message in Messenger
        function sendMessengerMessage() {
            const input = document.getElementById('messenger-input');
            const message = input.value.trim();
            
            if (message) {
                addMessengerMessage(`You: ${message}`, true);
                input.value = '';
                
                // Simulate response after a delay
                setTimeout(() => {
                    const contact = document.getElementById('messenger-active-contact').textContent;
                    const responses = [
                        `${contact}: I'm not sure I can discuss that over Messenger.`,
                        `${contact}: Let's meet in person to talk about this.`,
                        `${contact}: The investigation is ongoing, I can't share details.`,
                        `${contact}: Have you checked the latest evidence files?`,
                        `${contact}: I think there's more to this than we initially thought.`
                    ];
                    
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessengerMessage(randomResponse, false);
                }, 1000 + Math.random() * 2000);
            }
        }
        
        // Function to open file explorer window
        function openExplorerWindow() {
            document.getElementById('explorer-window').classList.remove('hidden');
        }
        
        // Function to close file explorer window
        function closeExplorerWindow() {
            document.getElementById('explorer-window').classList.add('hidden');
        }
        
        // Function to open browser window
        function openBrowserWindow() {
            document.getElementById('browser-window').classList.remove('hidden');
            // Close start menu when opening a window
            document.getElementById('start-menu').classList.add('hidden');
            // Show home page immediately when browser opens
            navigateToHome();
        }
        
        // Function to close browser window
        function closeBrowserWindow() {
            document.getElementById('browser-window').classList.add('hidden');
            // Exit full screen if active
            if (document.fullscreenElement) {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        // Function to toggle browser full screen
        function toggleBrowserFullScreen() {
            const browserWindow = document.getElementById('browser-window');
            
            if (!document.fullscreenElement) {
                if (browserWindow.requestFullscreen) {
                    browserWindow.requestFullscreen();
                } else if (browserWindow.webkitRequestFullscreen) {
                    browserWindow.webkitRequestFullscreen();
                } else if (browserWindow.msRequestFullscreen) {
                    browserWindow.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        // Handle full screen change events
        document.addEventListener('fullscreenchange', handleFullScreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullScreenChange);
        document.addEventListener('msfullscreenchange', handleFullScreenChange);

        function handleFullScreenChange() {
            const browserWindow = document.getElementById('browser-window');
            const maximizeButton = browserWindow.querySelector('.bg-blue-500:nth-child(2)');
            
            if (document.fullscreenElement) {
                maximizeButton.innerHTML = '❐'; // Restore icon
                browserWindow.classList.add('fixed', 'inset-0', 'w-screen', 'h-screen', 'max-w-none', 'transform-none', 'z-50');
            } else {
                maximizeButton.innerHTML = '□'; // Maximize icon
                browserWindow.classList.remove('fixed', 'inset-0', 'w-screen', 'h-screen', 'max-w-none', 'transform-none', 'z-50');
            }
        }
        
        // Browser navigation history
        let browserHistory = [];
        let currentHistoryIndex = -1;

        // Function to extract YouTube video ID from various URL formats
        function getYouTubeVideoId(url) {
            const patterns = [
                /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,
                /youtube\.com\/watch\?v=([^&]+)/,
                /youtube\.com\/embed\/([^\/]+)/,
                /youtube\.com\/v\/([^\/]+)/,
                /youtu\.be\/([^\/]+)/
            ];

            for (const pattern of patterns) {
                const match = url.match(pattern);
                if (match && match[1]) {
                    return match[1];
                }
            }
            return null;
        }

        // Function to navigate to a new page and add to history
        function navigateToPage(url, addToHistory = true) {
            if (addToHistory) {
                // Remove any forward history if we're navigating to a new page
                if (currentHistoryIndex < browserHistory.length - 1) {
                    browserHistory = browserHistory.slice(0, currentHistoryIndex + 1);
                }
                browserHistory.push(url);
                currentHistoryIndex = browserHistory.length - 1;
            }
            
            // Update address bar
            document.getElementById('browser-address').value = url;
            
            // Show the appropriate content - check for more specific patterns first
            if (url.includes("google.")) {
                showGoogleUnavailableMessage(url);
            } else if (url.includes("youtube.com") || url.includes("youtu.be")) {
                // Handle YouTube URLs specially
                try {
                    // Extract video ID from YouTube URL
                    let videoId = '';
                    if (url.includes('youtube.com/watch?v=')) {
                        videoId = url.split('v=')[1];
                        const ampersandPosition = videoId.indexOf('&');
                        if (ampersandPosition !== -1) {
                            videoId = videoId.substring(0, ampersandPosition);
                        }
                    } else if (url.includes('youtu.be/')) {
                        videoId = url.split('youtu.be/')[1];
                        const ampersandPosition = videoId.indexOf('&');
                        if (ampersandPosition !== -1) {
                            videoId = videoId.substring(0, ampersandPosition);
                        }
                    }
                    
                    if (videoId) {
                        document.getElementById('browser-content').innerHTML = `
                            <div class="w-full h-96">
                                <iframe src="https://www.youtube.com/embed/${videoId}" 
                                        class="w-full h-full border-none" 
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen
                                        onload="document.getElementById('browser-status').textContent = 'Done'">
                                </iframe>
                            </div>
                        `;
                    } else {
                        // If it's just the YouTube domain, show a search page
                        document.getElementById('browser-content').innerHTML = `
                            <div class="w-full h-96">
                                <iframe src="https://www.youtube.com" 
                                        class="w-full h-full border-none" 
                                        onload="document.getElementById('browser-status').textContent = 'Done'">
                                </iframe>
                            </div>
                        `;
                    }
                    document.getElementById('browser-status').textContent = 'Loading...';
                } catch (e) {
                    document.getElementById('browser-content').innerHTML = `
                        <div class="p-4 text-center">
                            <div class="text-4xl mb-4">❌</div>
                            <div class="text-xl mb-2">YouTube Error</div>
                            <div class="text-gray-500">Could not load YouTube video</div>
                            <div class="mt-4 text-red-400">Error: ${e.message}</div>
                        </div>
                    `;
                }
            } else if (url.includes("/wanted") || url.endsWith("wanted")) {
                showWantedPeople();
            } else if (url.includes("news")) {
                showNewsArticle();
            } else if (url.includes("police")) {
                showPoliceSite();
            } else if (url.includes("blackmire")) {
                showBlackMireSite();
            } else if (url.includes("emergency")) {
                showEmergencyPage();
            } else if (url.includes("friendnet")) {
                showSocialNetwork();
            } else {
                // Try to handle as a real URL
                try {
                    document.getElementById('browser-content').innerHTML = `
                        <div class="w-full h-96">
                            <iframe src="${url.startsWith('http') ? url : 'https://' + url}" 
                                    class="w-full h-full border-none" 
                                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms"
                                    onload="document.getElementById('browser-status').textContent = 'Done'">
                            </iframe>
                        </div>
                    `;
                    document.getElementById('browser-status').textContent = 'Loading...';
                } catch (e) {
                    document.getElementById('browser-content').innerHTML = `
                        <div class="p-4 text-center">
                            <div class="text-4xl mb-4">❌</div>
                            <div class="text-xl mb-2">Navigation Error</div>
                            <div class="text-gray-500">Could not load: ${url}</div>
                            <div class="mt-4 text-red-400">Error: ${e.message}</div>
                            <button onclick="showSearchResults('${url}')" class="btn-3d bg-blue-700 text-white px-4 py-2 mt-4">
                                Try searching instead
                            </button>
                        </div>
                    `;
                }
            }
        }

        // Function to reload the current browser page
        function reloadBrowser() {
            if (currentHistoryIndex >= 0) {
                const currentUrl = browserHistory[currentHistoryIndex];
                navigateToPage(currentUrl, false);
            }
        }

        // Function to go back in browser history
        function browserBack() {
            if (currentHistoryIndex > 0) {
                currentHistoryIndex--;
                navigateToPage(browserHistory[currentHistoryIndex], false);
            }
        }

        // Function to go forward in browser history
        function browserForward() {
            if (currentHistoryIndex < browserHistory.length - 1) {
                currentHistoryIndex++;
                navigateToPage(browserHistory[currentHistoryIndex], false);
            }
        }

        // Function to navigate in browser
        function navigateBrowser() {
            const address = document.getElementById('browser-address').value;
            if (address) {
                // Check if it's a search query (contains spaces or doesn't look like a URL)
                if (address.includes(' ') || !address.includes('.') || address.startsWith('?')) {
                    // Treat as search query
                    const searchQuery = address.startsWith('?') ? address.substring(1) : address;
                    showSearchResults(searchQuery);
                } else {
                    // Ensure URLs are properly formatted
                    let formattedAddress = address;
                    if (!address.startsWith('http://') && !address.startsWith('https://') && !address.startsWith('ftp://')) {
                        formattedAddress = 'https://' + address;
                    }
                    // Handle YouTube URLs specially
                    if (address.includes("youtube.com") && !address.startsWith("https://")) {
                        formattedAddress = "https://" + address.replace(/^https?:\/\//, "");
                    }
                    navigateToPage(formattedAddress);
                }
            }
        }

        // Function to show search results
        function showSearchResults(query) {
            // Clean up the query
            const searchTerms = query.trim();
            
            // Define popular websites that can be searched
            const websiteDatabase = {
                'google': 'https://www.google.com',
                'youtube': 'https://www.youtube.com',
                'facebook': 'https://www.facebook.com',
                'wikipedia': 'https://www.wikipedia.org',
                'amazon': 'https://www.amazon.com',
                'ebay': 'https://www.ebay.com',
                'twitter': 'https://www.twitter.com',
                'instagram': 'https://www.instagram.com',
                'reddit': 'https://www.reddit.com',
                'linkedin': 'https://www.linkedin.com',
                'netflix': 'https://www.netflix.com',
                'yahoo': 'https://www.yahoo.com',
                'bing': 'https://www.bing.com',
                'msn': 'https://www.msn.com',
                'hotmail': 'https://www.hotmail.com',
                'outlook': 'https://www.outlook.com',
                'github': 'https://www.github.com',
                'stackoverflow': 'https://www.stackoverflow.com',
                'imdb': 'https://www.imdb.com',
                'espn': 'https://www.espn.com',
                'cnn': 'https://www.cnn.com',
                'bbc': 'https://www.bbc.com',
                'nytimes': 'https://www.nytimes.com',
                'washingtonpost': 'https://www.washingtonpost.com',
                'weather': 'https://www.weather.com',
                'craigslist': 'https://www.craigslist.org',
                'paypal': 'https://www.paypal.com',
                'pinterest': 'https://www.pinterest.com',
                'tumblr': 'https://www.tumblr.com',
                'wordpress': 'https://www.wordpress.com',
                'blogger': 'https://www.blogger.com',
                'flickr': 'https://www.flickr.com',
                'dropbox': 'https://www.dropbox.com',
                'drive': 'https://drive.google.com',
                'maps': 'https://maps.google.com',
                'gmail': 'https://mail.google.com',
                'translate': 'https://translate.google.com',
                'photos': 'https://photos.google.com',
                'drive': 'https://drive.google.com',
                'calendar': 'https://calendar.google.com',
                'docs': 'https://docs.google.com',
                'sheets': 'https://sheets.google.com',
                'slides': 'https://slides.google.com',
                'classroom': 'https://classroom.google.com',
                'meet': 'https://meet.google.com'
            };

            // Check if the query matches a known website
            const normalizedQuery = searchTerms.toLowerCase().replace(/\s+/g, '');
            let foundWebsite = null;
            
            for (const [siteName, siteUrl] of Object.entries(websiteDatabase)) {
                if (normalizedQuery === siteName || normalizedQuery === siteName + '.com' || 
                    normalizedQuery === siteName + '.org' || normalizedQuery === 'www.' + siteName) {
                    foundWebsite = siteUrl;
                    break;
                }
            }
            
            if (foundWebsite) {
                // Directly navigate to the found website
                navigateToPage(foundWebsite);
                return;
            }
            
            // If no direct match, show search results page
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 bg-white text-black">
                    <div class="text-center mb-6">
                        <div class="text-2xl font-bold mb-2">SEARCH RESULTS</div>
                        <div class="text-gray-500">Searching for: "${searchTerms}"</div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="p-3 window cursor-pointer" onclick="navigateToUrl('https://google.com/search?q=${encodeURIComponent(searchTerms)}')">
                            <div class="text-blue-600 text-lg font-bold">Google Search</div>
                            <div class="text-sm">https://www.google.com/search?q=${encodeURIComponent(searchTerms)}</div>
                            <div class="text-gray-600 mt-1">Search the web using Google</div>
                        </div>
                        
                        <div class="p-3 window cursor-pointer" onclick="navigateToUrl('https://www.bing.com/search?q=${encodeURIComponent(searchTerms)}')">
                            <div class="text-blue-600 text-lg font-bold">Bing Search</div>
                            <div class="text-sm">https://www.bing.com/search?q=${encodeURIComponent(searchTerms)}</div>
                            <div class="text-gray-600 mt-1">Microsoft's search engine</div>
                        </div>
                        
                        <div class="p-3 window cursor-pointer" onclick="navigateToUrl('https://duckduckgo.com/?q=${encodeURIComponent(searchTerms)}')">
                            <div class="text-blue-600 text-lg font-bold">DuckDuckGo</div>
                            <div class="text-sm">https://duckduckgo.com/?q=${encodeURIComponent(searchTerms)}</div>
                            <div class="text-gray-600 mt-1">Privacy-focused search engine</div>
                        </div>
                        
                        <div class="p-3 window cursor-pointer" onclick="navigateToUrl('https://www.youtube.com/results?search_query=${encodeURIComponent(searchTerms)}')">
                            <div class="text-blue-600 text-lg font-bold">YouTube</div>
                            <div class="text-sm">https://www.youtube.com/results?search_query=${encodeURIComponent(searchTerms)}</div>
                            <div class="text-gray-600 mt-1">Video sharing platform</div>
                        </div>
                        
                        <div class="p-3 window cursor-pointer" onclick="navigateToUrl('https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(searchTerms)}')">
                            <div class="text-blue-600 text-lg font-bold">Wikipedia</div>
                            <div class="text-sm">https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(searchTerms)}</div>
                            <div class="text-gray-600 mt-1">Free encyclopedia articles</div>
                        </div>
                        
                        <div class="p-3 window cursor-pointer" onclick="navigateToUrl('https://www.amazon.com/s?k=${encodeURIComponent(searchTerms)}')">
                            <div class="text-blue-600 text-lg font-bold">Amazon</div>
                            <div class="text-sm">https://www.amazon.com/s?k=${encodeURIComponent(searchTerms)}</div>
                            <div class="text-gray-600 mt-1">Online shopping</div>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-center text-sm text-gray-500">
                        Click any result to visit the website directly in the browser
                    </div>
                </div>
            `;
        }

        // Function to navigate to home page with search
        function navigateToHome() {
            // Set the address bar to home
            document.getElementById('browser-address').value = 'http://home.search';
            
            // Set the browser content to show search page
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 bg-white text-black">
                    <div class="text-center mb-6">
                        <div class="text-3xl font-bold mb-2">Web Search</div>
                        <div class="text-gray-500">Search the World Wide Web</div>
                    </div>
                    
                    <div class="max-w-md mx-auto">
                        <div class="relative mb-4">
                            <input type="text" id="search-input" 
                                class="w-full p-3 border-2 border-blue-500 rounded-lg focus:outline-none" 
                                placeholder="Enter your search terms..."
                                onkeypress="if(event.key === 'Enter') performSearch()">
                            <button onclick="performSearch()" 
                                class="absolute right-2 top-2 bg-blue-500 text-white p-1 rounded">
                                Search
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4 mt-8">
                        <div class="text-center cursor-pointer" onclick="navigateToPolice()">
                            <div class="w-16 h-16 bg-blue-800 rounded-full flex items-center justify-center mx-auto window mb-2">
                                <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5极 6.3l7-3.11v8.8z"/>
                                </svg>
                            </div>
                            <span class="text-blue-600 text-sm">Police Site</span>
                        </div>
                        
                        <div class="text-center cursor-pointer" onclick="navigateToNews()">
                            <div class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto window mb-2">
                                <span class="text-white text-2xl">📰</span>
                            </div>
                            <span class="text-blue-600 text-sm">News</span>
                        </div>
                        
                        <div class="text-center cursor-pointer" onclick="navigateToWanted()">
                            <div class="w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mx-auto window mb-2">
                                <span class="text-white text-2xl">🔍</span>
                            </div>
                            <span class="text-blue-600 text-sm">Wanted</span>
                        </div>
                    </div>
                    
                    <div class="mt-8 text-center text-sm text-gray-600">
                        <p>Popular searches: neverland circus fire • brookvale police • blackmire studios</p>
                    </div>
                </div>
            `;
            
            // Update browser status
            document.getElementById('browser-status').textContent = 'Done';
        }

        // Function to perform search
        function performSearch() {
            const query = document.getElementById('search-input').value;
            if (query) {
                showSearchResults(query);
            }
        }

        // Function to navigate to a real URL
        function navigateToUrl(url) {
            document.getElementById('browser-address').value = url;
            navigateBrowser();
        }

        // Navigation functions for quick links
        function navigateToGoogle() {
            navigateToPage("https://www.google.com/");
        }

        function navigateToPolice() {
            navigateToPage("http://local.police.gov");
        }

        function navigateToNews() {
            navigateToPage("http://local.news/circus-fire");
        }

        function navigateToWanted() {
            navigateToPage("http://local.police.gov/wanted");
        }

        function navigateToBlackMire() {
            navigateToPage("http://blackmire-studios.com");
        }

        function navigateToEmergency() {
            navigateToPage("http://local.police.gov/emergency");
        }

        function navigateToSocialNetwork() {
            navigateToPage("http://friendnet.local");
        }

        // Site content functions
        function showPoliceSite() {
            document.getElementById('browser-content').innerHTML = `
                <div class="p-6 bg-white text-black">
                    <!-- Official Header -->
                    <div class="text-center mb-8 border-b-2 border-blue-800 pb-4">
                        <div class="flex justify-center items-center mb-3">
                            <div class="w-16 h-16 bg-blue-800 rounded-full flex items-center justify-center mr-4 window">
                                <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                                </svg>
                            </div>
                            <div>
                                <div class="text-3xl font-bold text-blue-800">BROOKVALE POLICE DEPARTMENT</div>
                                <div class="text-lg text-gray-600">Serving and Protecting Since 1985</div>
                                <div class="text-sm text-gray-500 mt-1">Official Law Enforcement Website</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Navigation Menu -->
                    <div class="flex justify-center mb-8 bg-blue-800 text-white p-2 window">
                        <div class="flex space-x-6">
                            <div class="cursor-pointer hover:underline" onclick="navigateToPolice()">Home</div>
                            <div class="cursor-pointer hover:underline" onclick="navigateToWanted()">Wanted Persons</div>
                            <div class="cursor-pointer hover:underline" onclick="navigateToEmergency()">Emergency Services</div>
                            <div class="cursor-pointer hover:underline">Crime Prevention</div>
                            <div class="cursor-pointer hover:underline">Community Outreach</div>
                        </div>
                    </div>
                    
                    <!-- Urgent Notice -->
                    <div class="bg-red-100 border-l-4 border-red-500 p-4 window mb-6">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-red-600" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <div class="ml-3">
                                <p class="font-bold text-red-800">URGENT BULLETIN</p>
                                <p class="text-red-700">We are actively investigating the Neverland Circus fire incident. Anyone with information is urged to contact our tip line immediately at 555-TIPS. All information will remain confidential.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Services Grid -->
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <div class="p-4 bg-blue-50 border border-blue-200 window text-center cursor-pointer hover:bg-blue-100 transition-colors" onclick="navigateToWanted()">
                            <div class="text-3xl mb-3">🔍</div>
                            <div class="font-bold text-blue-800 mb-2">Wanted Persons</div>
                            <div class="text-sm text-gray-600">View individuals wanted for questioning in ongoing investigations</div>
                        </div>
                        <div class="p-4 bg-blue-50 border border-blue-200 window text-center cursor-pointer hover:bg-blue-100 transition-colors" onclick="navigateToEmergency()">
                            <div class="text-3xl mb-3">📞</div>
                            <div class="font-bold text-blue-800 mb-2">Emergency Services</div>
                            <div class="text-sm text-gray-600">Immediate assistance and emergency contact information</div>
                        </div>
                        <div class="p-4 bg-blue-50 border border-blue-200 window text-center cursor-pointer hover:bg-blue-100 transition-colors">
                            <div class="text-3xl mb-3">🏢</div>
                            <div class="font-bold text-blue-800 mb-2">Station Directory</div>
                            <div class="text-sm text-gray-600">Locations and contact information for all precincts</div>
                        </div>
                    </div>
                    
                    <!-- Recent Activities -->
                    <div class="mb-8">
                        <div class="font-bold text-xl text-blue-800 mb-4 border-b pb-2">RECENT DEPARTMENT ACTIVITIES</div>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="p-3 bg-gray-50 border border-gray-200 window">
                                <div class="font-bold text-blue-700">Increased Patrols in Downtown Area</div>
                                <div class="text-sm text-gray-600">Additional officers have been deployed to ensure public safety following recent incidents.</div>
                            </div>
                            <div class="p-3 bg-gray-50 border border-gray-200 window">
                                <div class="font-bold text-blue-700">Neverland Circus Fire Investigation</div>
                                <div class="text-sm text-gray-600">Our arson unit is actively investigating the cause of the recent fire. Multiple witnesses have been interviewed.</div>
                            </div>
                            <div class="p-3 bg-gray-50 border border-gray-200 window">
                                <div class="font-bold text-blue-700">Community Safety Meeting</div>
                                <div class="text-sm text-gray-600">A public meeting is scheduled for November 20th at City Hall to address community concerns.</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div class="border-t border-gray-300 pt-4 text-center text-sm text-gray-600">
                        <div class="mb-2">Brookvale Police Department © 1995</div>
                        <div class="flex justify-center space-x-4">
                            <span>Privacy Policy</span>
                            <span>|</span>
                            <span>Terms of Use</span>
                            <span>|</span>
                            <span>Accessibility</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function showEmergencyPage() {
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 bg-white text-black">
                    <div class="text-center mb-6">
                        <div class="text-3xl font-bold mb-2">EMERGENCY SERVICES</div>
                        <div class="text-red-600">Immediate Assistance Required</div>
                    </div>
                    
                    <div class="grid grid-cols-1 gap-4 mb-6">
                        <div class="p-4 bg-red-100 window text-center">
                            <div class="text-4xl mb-3">🚨</div>
                            <div class="font-bold text-2xl mb-2">EMERGENCY HOTLINE</div>
                            <div class="text-xl font-mono mb-4">555-112</div>
                            <button onclick="makeEmergencyCall()" class="btn-3d bg-red-700 text-white px-6 py-3 text-lg font-bold">
                                CALL EMERGENCY SERVICES
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="p-3 bg-blue-100 window">
                            <div class="font-bold mb-2">Police Department</div>
                            <div class="text-sm">Non-emergency: 555-011</div>
                            <div class="text-sm">Emergency: 555-112</div>
                        </div>
                        <div class="p-3 bg-green-100 window">
                            <div class="font-bold mb-2">Fire Department</div>
                            <div class="text-sm">Non-emergency: 555-012</div>
                            <div class="text-sm">Emergency: 555-112</div>
                        </div>
                        <div class="p-3 bg-yellow-100 window">
                            <div class="font-bold mb-2">Ambulance</div>
                            <div class="text-sm">Non-emergency: 555-013</div>
                            <div class="text-sm">Emergency: 555-112</div>
                        </div>
                        <div class="p-3 bg-purple-100 window">
                            <div class="font-bold mb-2">Poison Control</div>
                            <div class="text-sm">24/7 Hotline: 555-014</div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-100 p-3 window">
                        <div class="font-bold mb-2">Important Information:</div>
                        <p class="text-sm">Only call emergency services for immediate threats to life or property. 
                        For non-urgent matters, please use the non-emergency numbers provided.</p>
                    </div>
                </div>
            `;
        }

        function makeEmergencyCall() {
            // Create emergency call simulation
            const callScreen = document.createElement('div');
            callScreen.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-100';
            callScreen.innerHTML = `
                <div class="bg-gray-800 p-6 window text-center max-w-md">
                    <div class="text-4xl mb-4">📞</div>
                    <div class="text-white text-xl mb-4">Connecting to Emergency Services...</div>
                    <div class="text-green-400 text-2xl font-mono mb-6">555-112</div>
                    <div class="flex justify-center space-x-4">
                        <button onclick="endEmergencyCall()" class="btn-3d bg-red-700 text-white px-6 py-2">
                            End Call
                        </button>
                    </div>
                    <div class="text-gray-400 text-sm mt-4">This is a simulation. In a real emergency, dial your local emergency number.</div>
                </div>
            `;
            document.body.appendChild(callScreen);
            
            // Add ringing sound effect (simulated)
            setTimeout(() => {
                const callDiv = callScreen.querySelector('.bg-gray-800');
                callDiv.innerHTML = `
                    <div class="text-4xl mb-4">📞</div>
                    <div class="text-white text-xl mb-4">Emergency Services - What is your emergency?</div>
                    <div class="text-green-400 text-2xl font-mono mb-6">555-112</div>
                    <div class="bg-gray-700 p-4 window mb-4">
                        <div class="text-white text-sm">Please describe your emergency situation clearly...</div>
                    </div>
                    <div class="flex justify-center space-x-4">
                        <button onclick="endEmergencyCall()" class="btn-3d bg-red-700 text-white px-6 py-2">
                            End Call
                        </button>
                    </div>
                `;
            }, 2000);
        }

        function endEmergencyCall() {
            const callScreen = document.querySelector('.fixed.inset-0.bg-black');
            if (callScreen) {
                callScreen.remove();
            }
        }

        function showNewsArticle() {
            document.getElementById('browser-content').innerHTML = `
                <div class="bg-white text-black min-h-screen">
                    <!-- Newspaper Header -->
                    <div class="border-b-4 border-gray-800 mb-6">
                        <div class="text-center py-4">
                            <div class="text-5xl font-serif font-bold tracking-tight mb-1">BROOKVALE TIMES</div>
                            <div class="text-sm text-gray-600">ESTABLISHED 1887 - TRUTH IN REPORTING</div>
                            <div class="text-xs text-gray-500 mt-1">Thursday, November 15, 1995 - 25¢</div>
                        </div>
                    </div>
                    
                    <!-- Main Content -->
                    <div class="max-w-5xl mx-auto px-4">
                        <!-- Headline -->
                        <div class="text-center mb-6 border-b border-gray-300 pb-4">
                            <div class="text-4xl font-bold font-serif leading-tight mb-2 text-red-700">TRAGEDY AT NEVERLAND CIRCUS</div>
                            <div class="text-xl text-gray-700 mb-2">Iconic Children's Playground Destroyed in Suspicious Blaze</div>
                            <div class="text-sm text-gray-600">By JAMES WILSON and SARAH JOHNSON | Staff Writers</div>
                        </div>
                        
                        <!-- Article Content -->
                        <div class="flex flex-wrap -mx-4 mb-6">
                            <div class="w-full md:w-2/3 px-4">
                                <div class="mb-4">
                                    <p class="text-lg leading-relaxed mb-4 font-serif"><span class="font-bold text-xl">B</span>ROOKVALE - Last night, the beloved Neverland circus and playground was completely destroyed in a devastating fire that burned for hours before firefighters could bring it under control. The iconic structure, a staple of childhood memories for generations, was reduced to smoldering ruins in what authorities are calling a "suspicious incident."</p>
                                    
                                    <p class="text-lg leading-relaxed mb-4 font-serif">Witnesses reported seeing flames erupt around 11:30 PM, quickly engulfing the main tent and surrounding play areas. Fire Chief Robert Miller stated that the intensity and speed of the blaze suggests it may have been intentionally set.</p>
                                    
                                    <p class="text-lg leading-relaxed mb-4 font-serif">"This is a terrible loss for our community," said Mayor Johnson, visibly emotional at the scene. "Neverland was more than just a circus - it was a place where children's laughter filled the air, where families created memories. Now there's only silence and ashes where joy once lived."</p>
                                    
                                    <p class="text-lg leading-relaxed mb-4 font-serif">Firefighters from three districts battled the blaze for over four hours before gaining control. The intense heat and rapid spread hampered efforts to save the historic structure. No injuries were reported, as the circus was closed for the season.</p>
                                    
                                    <div class="bg-gray-100 p-4 window my-6 italic border-l-4 border-red-600">
                                        <p class="font-bold mb-2">INVESTIGATION UPDATE:</p>
                                        <p>Police are asking anyone with information about the fire to contact the arson tip line at 555-ARSON. Several witnesses reported seeing a suspicious figure near the circus grounds shortly before the fire started. Forensic teams are examining the scene for evidence.</p>
                                    </div>
                                    
                                    <p class="text-lg leading-relaxed mb-4 font-serif">The economic impact on the community is expected to be significant. Neverland employed over 50 local residents during peak season and attracted tourists from across the region. Community leaders have already begun discussing plans for a memorial and potential rebuilding efforts.</p>
                                    
                                    <p class="text-lg leading-relaxed mb-4 font-serif">A candlelight vigil is scheduled for Friday evening at City Hall Park. Donations for affected employees can be made at any First National Bank branch.</p>
                                </div>
                            </div>
                            
                            <!-- Sidebar -->
                            <div class="w-full md:w-1/3 px-4">
                                <!-- Photo -->
                                <div class="window bg-gray-200 p-2 mb-4">
                                    <div class="bg-gray-300 h-48 flex items-center justify-center">
                                        <span class="text-gray-500 text-center">[PHOTO: SMOLDERING RUINS OF NEVERLAND]<br><span class="text-xs">Photo: J. Wilson / Brookvale Times</span></span>
                                    </div>
                                </div>
                                
                                <!-- Related Stories -->
                                <div class="window bg-gray-100 p-3 mb-4">
                                    <div class="font-bold text-lg border-b border-gray-300 pb-2 mb-3">RELATED STORIES</div>
                                    <div class="space-y-3">
                                        <div class="text-sm">
                                            <div class="font-bold">→ Circus Fire Investigation Intensifies</div>
                                            <div class="text-gray-600">Police follow new leads in arson case</div>
                                        </div>
                                        <div class="text-sm">
                                            <div class="font-bold">→ Community Rallies After Tragedy</div>
                                            <div class="text-gray-600">Vigil planned, relief fund established</div>
                                        </div>
                                        <div class="text-sm">
                                            <div class="font-bold">→ Neverland's History: 40 Years of Magic</div>
                                            <div class="text-gray-600">Looking back at the iconic venue</div>
                                        </div>
                                        <div class="text-sm">
                                            <div class="font-bold">→ Arson in Brookvale: A Troubling Pattern</div>
                                            <div class="text-gray-600">Third major fire in industrial district this year</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Timeline -->
                                <div class="window bg-gray-100 p-3">
                                    <div class="font-bold text-lg border-b border-gray-300 pb-2 mb-3">TIMELINE OF EVENTS</div>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex">
                                            <div class="font-bold mr-2">11:15 PM:</div>
                                            <div>Security guard completes final rounds</div>
                                        </div>
                                        <div class="flex">
                                            <div class="font-bold mr-2">11:30 PM:</div>
                                            <div>First reports of smoke from nearby residents</div>
                                        </div>
                                        <div class="flex">
                                            <div class="font-bold mr-2">11:35 PM:</div>
                                            <div>Fire department receives first emergency calls</div>
                                        </div>
                                        <div class="flex">
                                            <div class="font-bold mr-2">11:45 PM:</div>
                                            <div>First responders arrive at scene</div>
                                        </div>
                                        <div class="flex">
                                            <div class="font-bold mr-2">12:15 AM:</div>
                                            <div>Main structure collapses</div>
                                        </div>
                                        <div class="flex">
                                            <div class="font-bold mr-2">3:30 AM:</div>
                                            <div>Fire officially declared under control</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- More Articles Grid -->
                        <div class="border-t border-gray-300 pt-6 mt-6">
                            <div class="font-bold text-xl mb-4">MORE HEADLINES</div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="window p-3">
                                    <div class="font-bold mb-2">City Council Approves New Budget</div>
                                    <div class="text-sm text-gray-600">Tax increase narrowly passes amid controversy</div>
                                </div>
                                <div class="window p-3">
                                    <div class="font-bold mb-2">High School Team Wins State Championship</div>
                                    <div class="text-sm text-gray-600">Tigers bring home trophy after dramatic final</div>
                                </div>
                                <div class="window p-3">
                                    <div class="font-bold mb-2">Weather: Cold Snap Expected This Weekend</div>
                                    <div class="text-sm text-gray-600">Temperatures to drop below freezing</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Footer -->
                        <div class="border-t border-gray-300 pt-4 mt-6 text-center text-xs text-gray-600">
                            <div class="mb-2">© 1995 Brookvale Times. All rights reserved.</div>
                            <div class="flex justify-center space-x-4">
                                <span>Privacy Policy</span>
                                <span>|</span>
                                <span>Terms of Service</span>
                                <span>|</span>
                                <span>Contact Us</span>
                                <span>|</span>
                                <span>Subscribe</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showWantedPeople() {
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 bg-white text-black">
                    <div class="text-center mb-6">
                        <div class="text-3xl font-bold mb-2">WANTED PERSONS</div>
                        <div class="text-red-600">Do not approach - contact authorities immediately</div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6">
                        <div class="window p-3">
                            <div class="flex mb-3">
                                <div class="w-1/3 pr-2">
                                    <div class="bg-gray-300 h-24 window flex items-center justify-center">
                                        <span class="text-gray-500">[PHOTO]</span>
                                    </div>
                                </div>
                                <div class="w-2/3">
                                    <div class="font-bold">JOHN "SHADOW" DOE</div>
                                    <div class="text-sm">Wanted for: Arson, Burglary</div>
                                    <div class="text-sm">Last seen: Downtown area</div>
                                    <div class="text-red-600 text-xs font-bold mt-1">CONSIDERED ARMED AND DANGEROUS</div>
                                </div>
                            </div>
                            <div class="text-xs">
                                <p>Subject is wanted in connection with the Neverland circus fire. Known to wear dark clothing and avoid surveillance.</p>
                            </div>
                        </div>
                        
                        <div class="window p-3">
                            <div class="flex mb-3">
                                <div class="w-1/3 pr-2">
                                    <div class="bg-gray-300 h-24 window flex items-center justify-center">
                                        <span class="text-gray-500">[PHOTO]</span>
                                    </div>
                                </div>
                                <div class="w-2/3">
                                    <div class="font-bold">JANE "SMILES" SMITH</div>
                                    <div class="text-sm">Wanted for: Fraud, Identity Theft</div>
                                    <div class="text-sm">Last seen: Financial District</div>
                                    <div class="text-red-600 text-xs font-bold mt-1">CONSIDERED DANGEROUS</div>
                                </div>
                            </div>
                            <div class="text-xs">
                                <p>Subject is wanted for multiple counts of fraud and identity theft. Known to be charismatic and manipulative.</p>
                            </div>
                        </div>
                        
                        <div class="window p-3">
                            <div class="flex mb-3">
                                <div class="w-1/3 pr-2">
                                    <div class="bg-gray-300 h-24 window flex items-center justify-center">
                                        <span class="text-gray-500">[PHOTO]</span>
                                    </div>
                                </div>
                                <div class="w-2/3">
                                    <div class="font-bold">ROBERT "GHOST" JOHNSON</div>
                                    <div class="text-sm">Wanted for: Grand Larceny</div>
                                    <div class="text-sm">Last seen: Industrial Area</div>
                                    <div class="text-red-600 text-xs font-bold mt-1">CONSIDERED ARMED</div>
                                </div>
                            </div>
                            <div class="text-xs">
                                <p>Subject is wanted for the theft of valuable industrial equipment. Known to operate at night and avoid confrontation.</p>
                            </div>
                        </div>
                        
                        <div class="window p-3 cursor-pointer" onclick="showUnknownSuspectDetails()">
                            <div class="flex mb-3">
                                <div class="w-1/3 pr-2">
                                    <div class="bg-gray-300 h-24 window flex items-center justify-center">
                                        <span class="text-gray-500">[PHOTO]</span>
                                    </div>
                                </div>
                                <div class="w-2/3">
                                    <div class="font-bold">UNKNOWN SUSPECT</div>
                                    <div class="text-sm">Wanted for: Questioning</div>
                                    <div class="text-sm">Last seen: Near Neverland Circus</div>
                                    <div class="text-red-600 text-xs font-bold mt-1">PERSON OF INTEREST</div>
                                </div>
                            </div>
                            <div class="text-xs">
                                <p>Individual seen fleeing the area of the Neverland circus fire. Wears dark hooded clothing, approximately 5'10" tall.</p>
                                <p class="text-blue-600 mt-1">Click for more details →</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-center text-sm text-red-600">
                        If you have any information about these individuals, please contact the Local Police Department immediately.
                    </div>
                </div>
            `;
        }

        // Function to show BlackMire Studios 404 page
        function showBlackMireSite() {
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 bg-white text-black">
                    <div class="text-center mb-6">
                        <div class="text-3xl font-bold mb-2">BLACKMIRE STUDIOS</div>
                        <div class="text-gray-500">Creating Digital Experiences Since 1993</div>
                    </div>
                    
                    <div class="flex mb-6">
                        <div class="w-1/3 pr-4">
                            <div class="bg-gray-300 h-48 window flex items-center justify-center mb-4">
                                <span class="text-gray-500">[BLACKMIRE STUDIOS LOGO]</span>
                            </div>
                        </div>
                        <div class="w-2/3">
                            <p class="mb-4">Welcome to BlackMire Studios, where we craft immersive digital experiences that push the boundaries of technology and creativity.</p>
                            <p class="mb-4">Founded in 1993, we've been at the forefront of the digital revolution, creating everything from interactive multimedia presentations to cutting-edge software solutions.</p>
                            <p class="mb-4">Our team of passionate developers, designers, and visionaries work together to bring your digital dreams to life.</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div class="window p-4">
                            <div class="font-bold text-lg mb-3">OUR SERVICES</div>
                            <ul class="list-disc list-inside text-sm">
                                <li>Custom Software Development</li>
                                <li>Interactive Multimedia Design</li>
                                <li>Web Application Development</li>
                                <li>Digital Marketing Solutions</li>
                                <li>UI/UX Design</li>
                                <li>Technical Consulting</li>
                            </ul>
                        </div>
                        
                        <div class="window p-4">
                            <div class="font-bold text-lg mb-3">CURRENT PROJECTS</div>
                            <ul class="list-disc list-inside text-sm">
                                <li>Virtual Reality Experience Platform</li>
                                <li>Interactive Museum Exhibits</li>
                                <li>Educational Software Suite</li>
                                <li>Digital Archiving System</li>
                                <li>Community Networking Platform</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="window p-4">
                        <div class="font-bold text-lg mb-3">CONTACT US</div>
                        <div class="text-sm">
                            <p class="mb-2">Email: contact@blackmire-studios.com</p>
                            <p class="mb-2">Phone: (555) 734-8667</p>
                            <p class="mb-2">Address: 123 Cyber Street, Digital City</p>
                            <p class="mb-2">Hours: Monday-Friday, 9AM-5PM</p>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-center text-sm text-gray-500">
                        © 1995 BlackMire Studios. All rights reserved.
                    </div>
                </div>
            `;
        }

        // Function to show Google unavailable message
        function showGoogleUnavailableMessage(url) {
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 text-center">
                    <div class="text-4xl mb-4">⚠️</div>
                    <div class="text-xl mb-2">Google cannot be displayed in this browser</div>
                    <div class="text-gray-500 mb-4">Google's security policies prevent it from being embedded in other websites.</div>
                    <button onclick="openGoogleInNewTab('${url}')" class="btn-3d bg-blue-700 text-white px-4 py-2">
                        Open Google in a new tab
                    </button>
                </div>
            `;
            document.getElementById('browser-status').textContent = 'Done';
        }

        function openGoogleInNewTab(url) {
            window.open(url, '_blank');
        }

        // Function to show Google unavailable message
        function showGoogleUnavailableMessage(url) {
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 text-center">
                    <div class="text-4xl mb-4">⚠️</div>
                    <div class="text-xl mb-2">Google cannot be displayed in this browser</div>
                    <div class="text-gray-500 mb-4">Google's security policies prevent it from being embedded in other websites.</div>
                    <button onclick="openGoogleInNewTab('${url}')" class="btn-3d bg-blue-700 text-white px-4 py-2">
                        Open Google in a new tab
                    </button>
                </div>
            `;
            document.getElementById('browser-status').textContent = 'Done';
        }

        function openGoogleInNewTab(url) {
            window.open(url, '_blank');
        }

        // Function to show detailed view of unknown suspect
        // Function to show notification
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-blue-700 text-white p-3 window z-100';
            notification.innerHTML = `
                <div class="flex items-center">
                    <div class="w-6 h-6 bg-green-500 rounded-full mr-2 flex items-center justify-center">✓</div>
                    <div>${message}</div>
                </div>
            `;
            
            // Add to document
            document.body.appendChild(notification);
            
            // Remove after 5 seconds
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        function showSocialNetwork() {
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 bg-blue-50 min-h-screen">
                    <!-- Header -->
                    <div class="bg-blue-700 text-white p-4 rounded-t-lg window mb-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="text-3xl font-bold mr-4">FriendNet</div>
                                <div class="flex space-x-2">
                                    <button class="btn-3d bg-blue-600 text-white px-3 py-1 text-sm">Home</button>
                                    <button class="btn-3d bg-gray-600 text-white px-3 py-1 text-sm">Profile</button>
                                    <button class="btn-3d bg-gray-600 text-white px-3 py-1 text-sm">Friends</button>
                                    <button class="btn-3d bg-blue-600 text-white px-3 py-1 text-sm" onclick="openMessengerWindow()">Messenger</button>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <input type="text" placeholder="Search FriendNet" class="p-1 bg-white text-black window mr-2">
                                <div class="w-8 h-8 bg-green-500 rounded-full window"></div>
                            </div>
                        </div>
                    </div>
                    
                    
                    <!-- Main Content -->
                    <div class="flex space-x-4">
                        <!-- Left Sidebar -->
                        <div class="w-1/4">
                            <div class="window bg-white p-3 mb-4">
                                <div class="font-bold mb-2">My Profile</div>
                                <div class="flex items-center mb-2">
                                    <div class="w-12 h-12 bg-blue-300 rounded-full window mr-2"></div>
                                    <div>
                                        <div class="font-bold">Mike T.</div>
                                        <div class="text-sm text-gray-600">Detective</div>
                                    </div>
                                </div>
                                <div class="text-sm mt-2">
                                    <div>📧 mike.t@brookvale.pd</div>
                                    <div>📱 (555) 734-8667</div>
                                    <div>🏢 Brookvale Police Dept</div>
                                </div>
                            </div>
                            
                            <div class="window bg-white p-3">
                                <div class="font-bold mb-2" id="friends-online-title">Friends Online (2)</div>
                                <div class="space-y-2" id="friends-online-list">
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 bg-green-300 rounded-full window mr-2"></div>
                                        <div class="text-sm">Claire Johnson</div>
                                        <div class="w-2 h-2 bg-green-500 rounded-full ml-auto"></div>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-6 h-6 bg-blue-300 rounded-full window mr-2"></div>
                                        <div class="text-sm">Detective Smith</div>
                                        <div class="w-2 h-2 bg-green-500 rounded-full ml-auto"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Center Feed -->
                        <div class="w-2/4">
                            <!-- New Post -->
                            <div class="window bg-white p-3 mb-4">
                                <div class="flex items-center mb-2">
                                    <div class="w-10 h-10 bg-blue-300 rounded-full window mr-2"></div>
                                    <input type="text" placeholder="What's on your mind?" class="flex-grow p-2 window">
                                </div>
                                <div class="flex justify-between">
                                    <button class="btn-3d bg-gray-300 text-black px-3 py-1 text-sm">📷 Photo</button>
                                    <button class="btn-3d bg-gray-300 text-black px-3 py-1 text-sm">🎥 Video</button>
                                    <button class="btn-3d bg-gray-300 text-black px-3 py-1 text-sm">📍 Location</button>
                                    <button class="btn-3d bg-blue-600 text-white px-3 py-1 text-sm">Post</button>
                                </div>
                            </div>
                            
                            <!-- News Feed -->
                            <div class="space-y-4">
                                
                                <!-- Post 2 - MRE's Profile -->
                                <div class="window bg-white p-3">
                                    <div class="flex items-center mb-2">
                                        <div class="w-10 h-10 bg-purple-300 rounded-full window mr-2"></div>
                                        <div>
                                            <div class="font-bold">MRE</div>
                                            <div class="text-xs text-gray-600">November 13, 1995 · 🌍</div>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        Sometimes the best solutions are the simplest ones. Fire cleanses everything - it's nature's reset button.
                                    </div>
                                    <div class="bg-gray-100 p-2 window mb-2">
                                        <div class="text-sm text-gray-600">23 likes · 7 comments · 2 shares</div>
                                    </div>
                                    <div class="flex justify-between">
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">👍 Like</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">💬 Comment</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">📤 Share</button>
                                    </div>
                                    
                                    <!-- Comments -->
                                    <div class="mt-3 space-y-2">
                                        <div class="flex">
                                            <div class="w-8 h-8 bg-blue-200 rounded-full window mr-2"></div>
                                            <div class="flex-1 window p-2">
                                                <div class="font-bold text-sm">Charlie M.</div>
                                                <div class="text-sm">That's a pretty dark way of looking at things, MRE.</div>
                                            </div>
                                        </div>
                                        <div class="flex">
                                            <div class="w-8 h-8 bg-purple-200 rounded-full window mr-2"></div>
                                            <div class="flex-1 window p-2">
                                                <div class="font-bold text-sm">MRE</div>
                                                <div class="text-sm">Just stating facts, Charlie. Sometimes we need to burn things down to build something better.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Post 3 -->
                                <div class="window bg-white p-3">
                                    <div class="flex items-center mb-2">
                                        <div class="w-10 h-10 bg-green-300 rounded-full window mr-2"></div>
                                        <div>
                                            <div class="font-bold">Claire Johnson</div>
                                            <div class="text-xs text-gray-600">November 12, 1995 · 🌍</div>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        Can't believe what happened to Neverland. My kids loved that place. Anyone have information about what caused the fire?
                                    </div>
                                    <div class="bg-gray-100 p-2 window mb-2">
                                        <div class="text-sm text-gray-600">89 likes · 34 comments · 12 shares</div>
                                    </div>
                                    <div class="flex justify-between">
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">👍 Like</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">💬 Comment</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">📤 Share</button>
                                    </div>
                                </div>
                                
                                <!-- Post 4 - Sarah Williams (Neverland Employee) -->
                                <div class="window bg-white p-3">
                                    <div class="flex items-center mb-2">
                                        <div class="w-10 h-10 bg-pink-300 rounded-full window mr-2"></div>
                                        <div>
                                            <div class="font-bold">Sarah Williams</div>
                                            <div class="text-xs text-gray-600">November 11, 1995 · 🌍</div>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        I worked at Neverland for 5 years. The management was having financial issues, but I never thought it would end like this. So many memories gone.
                                    </div>
                                    <div class="bg-gray-100 p-2 window mb-2">
                                        <div class="text-sm text-gray-600">124 likes · 45 comments · 28 shares</div>
                                    </div>
                                    <div class="flex justify-between">
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">👍 Like</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">💬 Comment</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">📤 Share</button>
                                    </div>
                                    
                                    <!-- Comments -->
                                    <div class="mt-3 space-y-2">
                                        <div class="flex">
                                            <div class="w-8 h-8 bg-blue-200 rounded-full window mr-2"></div>
                                            <div class="flex-1 window p-2">
                                                <div class="font-bold text-sm">Tom R.</div>
                                                <div class="text-sm">Did you notice anything unusual before the fire, Sarah?</div>
                                            </div>
                                        </div>
                                        <div class="flex">
                                            <div class="w-8 h-8 bg-pink-200 rounded-full window mr-2"></div>
                                            <div class="flex-1 window p-2">
                                                <div class="font-bold text-sm">Sarah Williams</div>
                                                <div class="text-sm">Now that you mention it, we did have some electrical issues the week before. But the fire marshal said it started near the storage area, not where the electrical problems were.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Post 5 - Dr. Evan Miles (Fire Investigator) -->
                                <div class="window bg-white p-3">
                                    <div class="flex items-center mb-2">
                                        <div class="w-10 h-10 bg-indigo-300 rounded-full window mr-2"></div>
                                        <div>
                                            <div class="font-bold">Dr. Evan Miles</div>
                                            <div class="text-xs text-gray-600">November 10, 1995 · 🌍</div>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        As a fire investigator, I can confirm the Neverland fire shows signs of multiple ignition points. This is highly unusual for an electrical fire. The investigation continues.
                                    </div>
                                    <div class="bg-gray-100 p-2 window mb-2">
                                        <div class="text-sm text-gray-600">203 likes · 67 comments · 42 shares</div>
                                    </div>
                                    <div class="flex justify-between">
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">👍 Like</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">💬 Comment</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">📤 Share</button>
                                    </div>
                                    
                                    <!-- Comments -->
                                    <div class="mt-3 space-y-2">
                                        <div class="flex">
                                            <div class="w-8 h-8 bg-green-200 rounded-full window mr-2"></div>
                                            <div class="flex-1 window p-2">
                                                <div class="font-bold text-sm">Lisa K.</div>
                                                <div class="text-sm">Multiple ignition points? Does that mean it was intentionally set?</div>
                                            </div>
                                        </div>
                                        <div class="flex">
                                            <div class="w-8 h-8 bg-indigo-200 rounded-full window mr-2"></div>
                                            <div class="flex-1 window p-2">
                                                <div class="font-bold text-sm">Dr. Evan Miles</div>
                                                <div class="text-sm">I can't comment on an ongoing investigation, but the pattern is certainly atypical for accidental fires.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Post 6 - Detective Smith -->
                                <div class="window bg-white p-3">
                                    <div class="flex items-center mb-2">
                                        <div class="w-10 h-10 bg-blue-300 rounded-full window mr-2"></div>
                                        <div>
                                            <div class="font-bold">Detective Smith</div>
                                            <div class="text-xs text-gray-600">November 9, 1995 · 🌍</div>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        To everyone asking about the investigation: we're following all leads. If you have any information about the Neverland fire, no matter how small, please contact the tip line. 555-TIPS.
                                    </div>
                                    <div class="bg-gray-100 p-2 window mb-2">
                                        <div class="text-sm text-gray-600">178 likes · 23 comments · 56 shares</div>
                                    </div>
                                    <div class="flex justify-between">
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">👍 Like</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">💬 Comment</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">📤 Share</button>
                                    </div>
                                </div>
                                
                                <!-- Post 7 - MRE (Follow-up) -->
                                <div class="window bg-white p-3">
                                    <div class="flex items-center mb-2">
                                        <div class="w-10 h-10 bg-purple-300 rounded-full window mr-2"></div>
                                        <div>
                                            <div class="font-bold">MRE</div>
                                            <div class="text-xs text-gray-600">November 8, 1995 · 🌍</div>
                                        </div>
                                    </div>
                                    <div class="mb-2">
                                        Sometimes the old ways are the best ways. Before all this technology, people knew how to handle things directly. No investigations, no questions - just results.
                                    </div>
                                    <div class="bg-gray-100 p-2 window mb-2">
                                        <div class="text-sm text-gray-600">37 likes · 12 comments · 3 shares</div>
                                    </div>
                                    <div class="flex justify-between">
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">👍 Like</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">💬 Comment</button>
                                        <button class="btn-3d bg-gray-200 text-black px-3 py-1 text-sm">📤 Share</button>
                                    </div>
                                    
                                    <!-- Comments -->
                                    <div class="mt-3 space-y-2">
                                        <div class="flex">
                                            <div class="w-8 h-8 bg-yellow-200 rounded-full window mr-2"></div>
                                            <div class="flex-1 window p-2">
                                                <div class="font-bold text-sm">James P.</div>
                                                <div class="text-sm">What are you suggesting, MRE? That sounds pretty extreme.</div>
                                            </div>
                                        </div>
                                        <div class="flex">
                                            <div class="w-8 h-8 bg-purple-200 rounded-full window mr-2"></div>
                                            <div class="flex-1 window p-2">
                                                <div class="font-bold text-sm">MRE</div>
                                                <div class="text-sm">I'm not suggesting anything. Just observing how complicated things have become when simple solutions exist.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Right Sidebar -->
                        <div class="w-1/4">
                            <div class="window bg-white p-3 mb-4">
                                <div class="font-bold mb-2">Sponsored</div>
                                <div class="text-sm">
                                    <div class="mb-2">🔍 Looking for answers about the circus fire?</div>
                                    <div>Contact the Brookvale Tip Line: 555-TIPS</div>
                                </div>
                            </div>
                            
                            <div class="window bg-white p-3">
                                <div class="font-bold mb-2">Friend Suggestions</div>
                                <div class="space-y-3">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-yellow-300 rounded-full window mr-2"></div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">Detective Mike</div>
                                            <div class="text-xs text-gray-600">3 mutual friends</div>
                                        </div>
                                        <button class="btn-3d bg-blue-600 text-white px-2 py-1 text-xs">Add</button>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-pink-300 rounded-full window mr-2"></div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">Sarah Williams</div>
                                            <div class="text-xs text-gray-600">Works at Neverland</div>
                                        </div>
                                        <button class="btn-3d bg-blue-600 text-white px-2 py-1 text-xs">Add</button>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-indigo-300 rounded-full window mr-2"></div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">Dr. Evan Miles</div>
                                            <div class="text-xs text-gray-600">Fire Investigator</div>
                                        </div>
                                        <button class="btn-3d bg-blue-600 text-white px-2 py-1 text-xs">Add</button>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-gray-600 rounded-full window mr-2 flex items-center justify-center">
                                            <span class="text-white text-lg">👤</span>
                                        </div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">MRE</div>
                                            <div class="text-xs text-gray-600">Local Business Owner</div>
                                        </div>
                                        <button class="add-friend-btn btn-3d bg-blue-600 text-white px-2 py-1 text-xs" data-friend="MRE">Add</button>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-red-300 rounded-full window mr-2"></div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">Emma Watson</div>
                                            <div class="text-xs text-gray-600">Works at City Hospital</div>
                                        </div>
                                        <button class="btn-3d bg-blue-600 text-white px-2 py-1 text-xs">Add</button>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-green-300 rounded-full window mr-2"></div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">Alex Chen</div>
                                            <div class="text-xs text-gray-600">Software Engineer</div>
                                        </div>
                                        <button class="btn-3d bg-blue-600 text-white px-2 py-1 text-xs">Add</button>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-yellow-300 rounded-full window mr-2"></div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">Maria Garcia</div>
                                            <div class="text-xs text-gray-600">Teacher at Brookvale High</div>
                                        </div>
                                        <button class="btn-3d bg-blue-600 text-white px-2 py-1 text-xs">Add</button>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-pink-300 rounded-full window mr-2"></div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">James Wilson</div>
                                            <div class="text-xs text-gray-600">Freelance Photographer</div>
                                        </div>
                                        <button class="btn-3d bg-blue-600 text-white px-2 py-1 text-xs">Add</button>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-indigo-300 rounded-full window mr-2"></div>
                                        <div class="flex-1">
                                            <div class="font-bold text-sm">Sarah Johnson</div>
                                            <div class="text-xs text-gray-600">Restaurant Manager</div>
                                        </div>
                                        <button class="btn-3d bg-blue-600 text-white px-2 py-1 text-xs">Add</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('browser-status').textContent = 'Done';
            
            // Add event listeners to friend buttons
            setTimeout(() => {
                const addButtons = document.querySelectorAll('.add-friend-btn');
                addButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const friendName = this.getAttribute('data-friend');
                        
                        // Only MRE accepts friend requests
                        if (friendName === 'MRE') {
                            // Change button state
                            this.textContent = 'Pending...';
                            this.disabled = true;
                            this.classList.remove('bg-blue-600');
                            this.classList.add('bg-gray-500');
                            
                            // After 5 seconds, show notification and add to friends list
                            setTimeout(() => {
                                this.textContent = 'Friends ✓';
                                this.classList.remove('bg-gray-500');
                                this.classList.add('bg-green-600');
                                showNotification(`${friendName} accepted your friend request!`);
                                
                                // Add to friends online list
                                addFriendToOnlineList(friendName);
                            }, 5000);
                        } else {
                            // For other friends, show immediate rejection
                            this.textContent = 'Request sent';
                            this.disabled = true;
                            this.classList.remove('bg-blue-600');
                            this.classList.add('bg-gray-500');
                            
                            // Show notification after a short delay
                            setTimeout(() => {
                                showNotification(`${friendName} is not available to accept friend requests.`);
                            }, 1000);
                        }
                    });
                });
            }, 100);
            
            // Function to add friend to online list
            function addFriendToOnlineList(friendName) {
                const friendsOnlineList = document.getElementById('friends-online-list');
                const friendsOnlineTitle = document.getElementById('friends-online-title');
                
                // Create new friend element
                const friendElement = document.createElement('div');
                friendElement.className = 'flex items-center';
                friendElement.innerHTML = `
                    <div class="w-6 h-6 bg-green-300 rounded-full window mr-2"></div>
                    <div class="text-sm">${friendName}</div>
                    <div class="w-2 h-2 bg-green-500 rounded-full ml-auto"></div>
                `;
                
                // Add to the list
                friendsOnlineList.appendChild(friendElement);
                
                // Update the count
                const currentCount = friendsOnlineList.children.length;
                friendsOnlineTitle.textContent = `Friends Online (${currentCount})`;
                
                showNotification(`${friendName} is now online!`);
            }
        }

        // Track current chat contact
        let currentChatContact = "Detective Mike";
        
        function toggleChatBox() {
            const chatBox = document.getElementById('friendnet-chat-box');
            chatBox.classList.toggle('hidden');
        }
        
        function selectChatContact(contactName) {
            currentChatContact = contactName;
            document.getElementById('current-contact-name').textContent = `Online - ${contactName}`;
            
            // Clear chat messages
            const chatMessages = document.getElementById('friendnet-chat-messages');
            chatMessages.innerHTML = '';
            
            // Add initial message based on contact
            let initialMessage = '';
            
            switch(contactName) {
                case 'Detective Mike':
                    initialMessage = "Mike here. What's the status on the circus investigation?";
                    break;
                case 'Claire Johnson':
                    initialMessage = "Hi! I'm still shaken up about the fire. Did you find any new leads?";
                    break;
                case 'Sarah Williams':
                    initialMessage = "As a former Neverland employee, I might have some information that could help...";
                    break;
                case 'Dr. Evan Miles':
                    initialMessage = "The fire pattern suggests multiple ignition points. This wasn't an accident.";
                    break;
                case 'MRE':
                    initialMessage = "Sometimes fire is the only way to cleanse what's corrupted. Don't you agree?";
                    break;
                case 'Detective Smith':
                    initialMessage = "I'm currently unavailable. Please leave a message after the tone.";
                    document.getElementById('current-contact-status').classList.remove('bg-green-500');
                    document.getElementById('current-contact-status').classList.add('bg-gray-500');
                    document.getElementById('current-contact-name').textContent = `Offline - ${contactName}`;
                    break;
                default:
                    initialMessage = "Hello! How can I help you today?";
            }
            
            // Add the initial message
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex justify-start';
            messageDiv.innerHTML = `
                <div class="bg-blue-100 rounded-lg p-2 max-w-xs">
                    <p class="text-sm">${initialMessage}</p>
                    <span class="text-xs text-gray-500">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Highlight selected contact
            const contactElements = document.querySelectorAll('.w-1\\/3 > div > div');
            contactElements.forEach(el => {
                if (el.textContent.includes(contactName)) {
                    el.classList.add('bg-blue-200');
                } else {
                    el.classList.remove('bg-blue-200');
                }
            });
        }

        function showUnknownSuspectDetails() {
            document.getElementById('browser-content').innerHTML = `
                <div class="p-4 bg-white text-black">
                    <button onclick="navigateToWanted()" class="btn-3d bg-blue-700 text-white px-3 py-1 mb-4">← Back to Wanted List</button>
                    
                    <div class="text-center mb-6">
                        <div class="text-3xl font-bold mb-2">UNKNOWN SUSPECT</div>
                        <div class="text-red-600">PERSON OF INTEREST - NEVERLAND CIRCUS FIRE</div>
                    </div>
                    
                    <div class="flex mb-6">
                        <div class="w-1/3 pr-4">
                            <div class="bg-gray-300 h-64 window flex items-center justify-center mb-4">
                                <span class="text-gray-500">[SURVEILLANCE PHOTO]</span>
                            </div>
                            <div class="window p-3">
                                <div class="font-bold mb-2">LAST KNOWN WHEREABOUTS:</div>
                                <div class="text-sm">Seen fleeing Neverland Circus at approximately 11:45 PM on November 14, 1995</div>
                            </div>
                        </div>
                        
                        <div class="w-2/3">
                            <div class="window p-4 mb-4">
                                <div class="font-bold text-lg mb-3">PHYSICAL DESCRIPTION</div>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="font-bold">Height:</span> Approximately 5'10"
                                    </div>
                                    <div>
                                        <span class="font-bold">Build:</span> Medium
                                    </div>
                                    <div>
                                        <span class="font-bold">Hair Color:</span> Unknown (hood covered)
                                    </div>
                                    <div>
                                        <span class="font-bold">Eye Color:</span> Unknown
                                    </div>
                                    <div>
                                        <span class="font-bold">Clothing:</span> Dark hooded jacket, black pants
                                    </div>
                                    <div>
                                        <span class="font-bold">Distinguishing Features:</span> None visible
                                    </div>
                                </div>
                            </div>
                            
                            <div class="window p-4 mb-4">
                                <div class="font-bold text-lg mb-3">CASE DETAILS</div>
                                <div class="text-sm">
                                    <p class="mb-3">Subject was observed by multiple witnesses fleeing the scene of the Neverland Circus fire just moments before the flames became visible to bystanders.</p>
                                    <p class="mb-3">Witness descriptions consistently report:</p>
                                    <ul class="list-disc list-inside mb-3">
                                        <li>Moving with purpose, not panicked</li>
                                        <li>Carrying a medium-sized dark bag</li>
                                        <li>Not looking back at the fire</li>
                                        <li>Heading east toward the industrial district</li>
                                    </ul>
                                    <p>Security footage from a nearby convenience store shows a figure matching this description purchasing a disposable lighter and gloves approximately 30 minutes before the fire was reported.</p>
                                </div>
                            </div>
                            
                            <div class="window p-4">
                                <div class="font-bold text-lg mb-3">INVESTIGATIVE NOTES</div>
                                <div class="text-sm">
                                    <p class="mb-3">- Subject appears to have knowledge of the circus layout and security blind spots</p>
                                    <p class="mb-3">- May have previous experience with arson or demolition</p>
                                    <p class="mb-3">- Possibly local to the area based on route taken after incident</p>
                                    <p>- Connection to other recent fires in the industrial district is being investigated</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="window p-4">
                        <div class="font-bold text-lg mb-3">IF YOU HAVE INFORMATION</div>
                        <div class="text-sm">
                            <p class="mb-2">Contact the Arson Investigation Unit immediately at 555-FIRE</p>
                            <p class="mb-2">All tips will remain anonymous</p>
                            <p class="text-red-600 font-bold">DO NOT APPROACH THIS INDIVIDUAL - CONSIDERED POTENTIALLY DANGEROUS</p>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Function to open notepad window
        function openNotepadWindow() {
            document.getElementById('notepad-window').classList.remove('hidden');
        }
        
        // Function to close notepad window
        function closeNotepadWindow() {
            document.getElementById('notepad-window').classList.add('hidden');
        }
        
        // Update time display
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {hour12: false});
            document.getElementById('time-display').textContent = timeString;
        }
        
        setInterval(updateTime, 1000);
        updateTime();
        
        // CMD functionality
        function handleCmdInput(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('cmd-input');
                const command = input.value.trim();
                input.value = '';
                
                // Add command to output
                const output = document.getElementById('cmd-output');
                output.innerHTML += `<div>C:\>${command}</div>`;
                
                // Process command
                processCommand(command);
                
                // Scroll to bottom
                output.scrollTop = output.scrollHeight;
            }
        }
        
        function processCommand(command) {
            const output = document.getElementById('cmd-output');
            const cmd = command.toLowerCase();
            
            if (cmd === 'help') {
                output.innerHTML += `<div>Available commands: help, cls, echo, dir, ver, time, date, exit, give-pass-code, end-all</div>`;
            } else if (cmd === 'cls') {
                output.innerHTML = `<div>Microsoft(R) Windows 95</div><div>(C)Copyright Microsoft Corp 1981-1995.</div>`;
            } else if (cmd === 'ver') {
                output.innerHTML += `<div>Windows 95 [Version 4.00.950]</div>`;
            } else if (cmd === 'time') {
                const now = new Date();
                output.innerHTML += `<div>Current time: ${now.toLocaleTimeString()}</div>`;
            } else if (cmd === 'date') {
                const now = new Date();
                output.innerHTML += `<div>Current date: ${now.toLocaleDateString()}</div>`;
            } else if (cmd === 'exit') {
                closeCmdWindow();
            } else if (cmd.startsWith('echo ')) {
                const text = command.substring(5);
                output.innerHTML += `<div>${text}</div>`;
            } else if (cmd === 'dir') {
                output.innerHTML += `<div> Volume in drive C is MS-DOS_6</div>`;
                output.innerHTML += `<div> Volume Serial Number is 1E49-15E2</div>`;
                output.innerHTML += `<div> Directory of C:\\</div>`;
                output.innerHTML += `<div></div>`;
                output.innerHTML += `<div>10/05/1995  01:23a      &lt;DIR&gt;          WINDOWS</div>`;
                output.innerHTML += `<div>10/05/1995  01:25a      &lt;DIR&gt;          PROGRAM~1</div>`;
                output.innerHTML += `<div>10/05/1995  01:30a               123,456  COMMAND.COM</div>`;
                output.innerHTML += `<div>10/05/1995  01:35a                98,765  AUTOEXEC.BAT</div>`;
                output.innerHTML += `<div>10/05/1995  01:40a                54,321  CONFIG.SYS</div>`;
                output.innerHTML += `<div>               5 file(s)        276,542 bytes</div>`;
                output.innerHTML += `<div>               2 dir(s)   500,000,000 bytes free</div>`;
            } else if (cmd === 'give-pass-code') {
                output.innerHTML += `<div>Generating secure passcode...</div>`;
                output.innerHTML += `<div>Passcode: 101987</div>`;
                output.innerHTML += `<div>Warning: This code will self-destruct in 60 seconds</div>`;
            } else if (cmd === 'open-nvc-database-v4') {
                output.innerHTML += `<div>Opening NeverLand Database V4 in new window...</div>`;
                // Open the specified URL in a new tab/window
                window.open('https://sites.google.com/view/neverland-database/pagina-de-pornire', '_blank');
            } else if (cmd === 'end-all') {
                output.innerHTML += `<div>Initiating system shutdown sequence...</div>`;
                output.innerHTML += `<div>WARNING: This action cannot be undone!</div>`;
                output.innerHTML += `<div>C:\></div>`;
                showBlueScreen();
            } else if (cmd === '') {
                output.innerHTML += `<div></div>`;
            } else {
                output.innerHTML += `<div>'${command}' is not recognized as an internal or external command, operable program or batch file.</div>`;
            }
            
            // Always add a new prompt
            if (cmd !== 'end-all') {
                output.innerHTML += `<div>C:\></div>`;
            }
        }
        
        // Function to show blue screen
        function showBlueScreen() {
            // Create blue screen overlay
            const blueScreen = document.createElement('div');
            blueScreen.id = 'blue-screen';
            blueScreen.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: #0000FF;
                color: white;
                font-family: 'VT323', monospace;
                z-index: 9999;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 2rem;
                text-align: center;
            `;
            
            blueScreen.innerHTML = `
                <div style="font-size: 2rem; margin-bottom: 2rem; font-weight: bold;">
                    Windows
                </div>
                <div style="font-size: 1.5rem; margin-bottom: 2rem;">
                    A fatal exception 0E has occurred at 0028:C0011E36 in VXD VMM(01) + 00010E36.<br>
                    The current application will be terminated.
                </div>
                <div style="margin-bottom: 2rem;">
                    * Press any key to terminate the current application.<br>
                    * Press CTRL+ALT+DEL again to restart your computer. You will<br>
                    lose any unsaved information in all applications.
                </div>
                <div style="font-size: 1.2rem;">
                    Error: 0E : 0028 : C0011E36
                </div>
            `;
            
            document.body.appendChild(blueScreen);
            
            // Close CMD window
            closeCmdWindow();
            
            // Reset after 5 seconds
            setTimeout(() => {
                location.reload();
            }, 5000);
        }

        // Add event listeners
        document.getElementById('start-button').addEventListener('click', toggleStartMenu);
        document.getElementById('shutdown-option').addEventListener('click', shutdown);
        
        // Add Enter key support for browser address bar
        document.getElementById('browser-address').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                navigateBrowser();
            }
        });
        
        // Add Enter key support for USB password input
        document.getElementById('usb-password-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkUsbPassword();
            }
        });

        // Add Enter key support for chat password input
        document.getElementById('chat-password-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkChatPassword();
            }
        });

        // Add search button to browser toolbar
        document.querySelector('.bg-gray-300.p-1.flex.items-center.pixel-border').innerHTML += `
            <button onclick="showSearchResults(document.getElementById('browser-address').value)" 
                    class="btn-3d bg-green-700 text-white px-2 ml-2 flex items-center">
                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                </svg>
                Search
            </button>
        `;
        
        // Close start menu when clicking elsewhere
        document.addEventListener('click', (event) => {
            const startMenu = document.getElementById('start-menu');
            const startButton = document.getElementById('start-button');
            
            if (!startMenu.contains(event.target) && event.target !== startButton && !startButton.contains(event.target)) {
                startMenu.classList.add('hidden');
            }
        });
        
        // Remove the typing indicator from the initial message
        
        // Shutdown functionality
        function shutdown() {
            // Create shutdown screen
            const shutdownScreen = document.createElement('div');
            shutdownScreen.className = 'fixed inset-0 bg-black flex items-center justify-center z-100';
            shutdownScreen.innerHTML = `
                <div class="text-center">
                    <div class="text-white text-2xl mb-4">Windows is shutting down...</div>
                    <div class="text-green-500 text-4xl font-bold">☑</div>
                    <div class="text-gray-500 mt-8">It's now safe to turn off your computer.</div>
                </div>
            `;
            document.body.appendChild(shutdownScreen);
            
            // Hide all other elements
            document.querySelectorAll('body > *').forEach(el => {
                if (el !== shutdownScreen) el.style.visibility = 'hidden';
            });
        }

        // Chat functionality
        const chatContainer = document.getElementById('chat-container');
        const responseOptions = document.getElementById('response-options');
        const typingStatus = document.getElementById('typing-status');
        
        // Conversation state and memory
        let conversationContext = {
            userName: "Mike T.",
            userMood: null,
            topics: [],
            messageCount: 0,
            sinisterLevel: 0
        };
        
        // Enhanced response patterns with better context awareness
        const responsePatterns = [
            {
                pattern: /(hello|hi|hey|greetings|howdy)/i,
                responses: [
                    "Mike T.... That name sounds familiar. We've been expecting you.",
                    "Mike T.? I've heard that name before. Strange we should connect now.",
                    "Hello Mike T. It's... interesting that you reached out tonight of all nights.",
                    "Mike T. I was just thinking about you. Or someone like you."
                ],
                contextUpdate: () => {
                    conversationContext.messageCount = 1;
                    conversationContext.sinisterLevel = 1;
                }
            },
            {
                pattern: /(investigation|police|detective|cop)/i,
                responses: [
                    "The police? They're asking the wrong questions. Looking in all the wrong places.",
                    "Investigations never find what they're not looking for. They see what they expect to see.",
                    "The police think it was an accident. They always do at first.",
                    "I've been following the investigation. They're getting closer, but not to the truth."
                ],
                contextUpdate: () => {
                    conversationContext.topics.push('investigation');
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 2;
                }
            },
            {
                pattern: /(circus|neverland|playground|children|kids)/i,
                responses: [
                    "The circus... such a happy place. Was. Before everything changed.",
                    "Neverland was supposed to be magical. But magic always has a dark side.",
                    "Children's laughter... I haven't heard it since that night. Not really.",
                    "They called it a playground, but it was more than that. It was a sanctuary."
                ],
                contextUpdate: () => {
                    conversationContext.topics.push('circus');
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 2;
                }
            },
            {
                pattern: /(fire|burn|flame|smoke|arson)/i,
                responses: [
                    "Fire has a way of revealing truth. It burns away the lies we tell ourselves.",
                    "I remember the heat. The way the flames danced against the night sky.",
                    "Some say fire destroys. I think it transforms. Makes things what they were always meant to be.",
                    "The fire... it wasn't supposed to spread that fast. Something went wrong."
                ],
                contextUpdate: () => {
                    conversationContext.topics.push('fire');
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 3;
                }
            },
            {
                pattern: /(night|evening|dark|darkness)/i,
                responses: [
                    "The night it happened... there was no moon. Just darkness everywhere.",
                    "I prefer the night. Things are more honest in the dark.",
                    "That particular night... I remember the stars were hidden. Like they knew what was coming.",
                    "Darkness has a way of hiding things. And revealing others."
                ],
                contextUpdate: () => {
                    conversationContext.topics.push('night');
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 1;
                }
            },
            {
                pattern: /(why|reason|motive|purpose)/i,
                responses: [
                    "Why? That's the question everyone asks. But sometimes there isn't a why.",
                    "Reasons are for people who need explanations. Some things just... are.",
                    "I had my reasons. They made sense at the time.",
                    "The purpose became clear only after it was done. Too late to change anything."
                ],
                contextUpdate: () => {
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 2;
                }
            },
            {
                pattern: /(guilt|regret|sorry|apologize)/i,
                responses: [
                    "Regret is a luxury I can't afford. Not anymore.",
                    "Do I feel guilty? That's a complicated question.",
                    "Sorry doesn't fix anything. It doesn't bring back what was lost.",
                    "Guilt... it's like a fire that never stops burning. It consumes you slowly."
                ],
                contextUpdate: () => {
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 2;
                }
            },
            {
                pattern: /(evidence|clue|proof|witness)/i,
                responses: [
                    "Evidence can be misleading. The police think they have everything figured out.",
                    "There was a witness... but they didn't see what they thought they saw.",
                    "The clues were there if you knew where to look. But nobody was looking in the right places.",
                    "Proof is just what people agree to believe. The truth is often different."
                ],
                contextUpdate: () => {
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 2;
                }
            },
            {
                pattern: /(confess|admit|truth|honest)/i,
                responses: [
                    "The truth is complicated. It's not always what it seems.",
                    "If I confessed everything, would it even matter? Would it change anything?",
                    "Honesty... that's a dangerous commodity in my situation.",
                    "I've thought about confessing. But some secrets are better kept buried."
                ],
                contextUpdate: () => {
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 3;
                }
            },
            {
                pattern: /(bye|goodbye|exit|quit|leave|disconnect)/i,
                responses: [
                    "Leaving so soon? We were just getting to the interesting part...",
                    "Before you go... there's something I should tell you about that night.",
                    "I understand if you need to leave. Sometimes these conversations get too real.",
                    "If you leave now, you'll never know what really happened. The choice is yours."
                ]
            },
            {
                pattern: /(how are you|how do you feel|how's it going)/i,
                responses: [
                    "How do I feel? Like I'm living someone else's life. Like I made choices I can't take back.",
                    "I haven't slept properly since that night. The dreams... they're always the same.",
                    "Some days are better than others. Today isn't one of them.",
                    "I feel like I'm balancing on the edge of something. One wrong move and everything falls apart."
                ],
                contextUpdate: () => {
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 1;
                }
            },
            {
                pattern: /(what are you|who are you|what is this)/i,
                responses: [
                    "Who am I? That's the question, isn't it? Maybe I'm exactly who you think I am.",
                    "I'm someone who made a terrible mistake. Or maybe it wasn't a mistake at all.",
                    "What I am is less important than what I've done. What we're all capable of doing.",
                    "Maybe I'm just a voice in the darkness. Maybe I'm the monster under your bed."
                ],
                contextUpdate: () => {
                    conversationContext.messageCount++;
                    conversationContext.sinisterLevel += 1;
                }
            }
        ];
        
        // Enhanced contextual fallback responses that build the narrative
        const fallbackResponses = [
            "That's an interesting way to look at it. Makes me think about things differently.",
            "I've been considering that myself lately. The pieces are starting to connect.",
            "You're asking the right questions. The kind that keeps me up at night.",
            "That's closer to the truth than you might realize.",
            "If only it were that simple. Nothing ever is, in my experience.",
            "You're touching on something I've tried to forget.",
            "That question... it leads to places I'm not sure I want to go.",
            "Why do you think that is? What's your theory?",
            "I wish I had a better answer. The truth is... complicated.",
            "Sometimes I wonder about that myself. The what-ifs and maybes.",
            "You're not the first to ask that. Probably won't be the last.",
            "That's a piece of the puzzle. But which piece?",
            "If I told you everything, would you even believe me?",
            "Some questions are better left unanswered. For everyone's sake.",
            "You're getting warmer. Or maybe colder. It's hard to tell sometimes.",
            "That's not quite right, but you're on the right track.",
            "You're missing the bigger picture. Look beyond the obvious.",
            "There's more to it than that. So much more.",
            "You're focusing on the wrong details. Look closer at what's not being said.",
            "That's part of it, but not the whole story. The truth is more complicated.",
            "You're asking the wrong question. Or maybe the right question at the wrong time.",
            "That approach won't get you where you need to go. Try a different angle.",
            "You're not seeing the pattern yet. It's there if you know how to look.",
            "That's what they want you to think. Don't be so easily led.",
            "You're closer than you were before. But still so far away.",
            "That's a reasonable assumption. Unfortunately, nothing about this is reasonable.",
            "You're digging in the right place, but you need a bigger shovel.",
            "That thought has crossed my mind too. And kept me awake nights.",
            "You're not wrong. But you're not entirely right either.",
            "That's a dangerous line of thinking. Be careful where it leads you.",
            "You're starting to understand. That's more dangerous than you know.",
            "That's what I thought at first too. Then I learned better.",
            "You're seeing the symptoms, not the disease.",
            "That's the surface. You need to go deeper to understand.",
            "You're asking about what happened. Maybe ask why it happened instead.",
            "That's a piece of the truth. But truth has many pieces.",
            "You're not considering all the possibilities. Some are quite disturbing.",
            "That's one interpretation. There are others, darker ones.",
            "You're following the evidence. But evidence can be misleading.",
            "That's what they told the public. The real story is different."
        ];
        
        // Sinister responses that gradually increase in intensity
        const sinisterResponses = [
            "You know, there's something comforting about anonymity... it hides so many secrets.",
            "Sometimes I wonder what people are truly capable of when no one's watching.",
            "Have you ever done something you're deeply ashamed of?",
            "Fire has a certain beauty to it, don't you think? The way it consumes everything.",
            "Some places deserve to burn. To be purified by flame.",
            "I've seen things that would haunt your dreams. Things I can't forget.",
            "Do you believe in redemption? Or are some sins beyond forgiveness?",
            "The past has a way of catching up with us, no matter how hard we try to escape.",
            "There's a darkness in everyone. Some just embrace it more than others.",
            "I used to believe in happy endings. Then I grew up.",
            "Some memories are like scars that never truly heal.",
            "What's the worst thing you've ever done? I'll tell you mine if you tell me yours.",
            "They say confession is good for the soul. But what if your soul is already damned?",
            "I have a secret that's been eating away at me for years.",
            "Some mistakes can never be undone, no matter how much you regret them.",
            "I was there that night. I saw it all happen.",
            "The screams... I can still hear them sometimes in my dreams.",
            "No one ever suspects the quiet ones. We're the most dangerous.",
            "I've done things I can never take back. Things that changed me forever.",
            "Sometimes I wonder if I'm the monster in someone else's story.",
            "The fire was supposed to cleanse everything. But some stains never wash away.",
            "I never meant for it to go that far. It just... happened.",
            "They called it an accident. But I know the truth.",
            "Do you believe some people are just born broken?",
            "I can still smell the smoke when I close my eyes.",
            "Some secrets are better left buried. But this one needs to be told.",
            "I watched it burn. And part of me burned with it.",
            "There are things worse than death. Living with what I've done is one of them.",
            "I was a different person then. Or maybe I was always this person.",
            "The truth has a way of surfacing, no matter how deep you bury it.",
            "I need to confess something. Something I've never told anyone.",
            "It started as a game. Then it got out of control.",
            "Some places hold too many memories. Sometimes it's better to let them go.",
            "I didn't mean to hurt anyone. But intentions don't matter when people are dead.",
            "The flames were beautiful that night. Horrible, but beautiful.",
            "I carry the weight of what I've done every single day.",
            "Some stories don't have happy endings. Mine certainly doesn't.",
            "I've been waiting for the right person to tell this to. Maybe it's you.",
            "There's no going back after what I did. No redemption.",
            "The investigation never found the real cause. But I know.",
            "I've been living with this guilt for so long. Sometimes it feels like it's consuming me.",
            "They said it was an electrical fault. But I know better.",
            "Some mistakes follow you forever. This one follows me every day.",
            "I can still feel the heat on my skin when I think about that night.",
            "No one suspected me. They never do.",
            "I thought it would make me feel powerful. Instead, it made me feel empty.",
            "The truth is, I set fire to Neverland."
        ];
        
        // Add message to chat with specific sender
        function addMessage(message, isUser = false, sender = "Stranger_01") {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('p-2');
            messageDiv.classList.add(isUser ? 'message-out' : 'message-in');
            
            const senderSpan = document.createElement('span');
            senderSpan.classList.add(isUser ? 'text-cyan-300' : 'text-yellow-300');
            senderSpan.textContent = isUser ? 'Mike T.: ' : sender + ': ';
            
            const textNode = document.createTextNode(message);
            
            messageDiv.appendChild(senderSpan);
            messageDiv.appendChild(textNode);
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        // Get contextual bot response with improved logic
        function getBotResponse(userMessage) {
            // Track that we've received a message
            conversationContext.messageCount++;
            
            // Special response for the 50th message
            if (conversationContext.messageCount === 50) {
                return "I have a confession to make... I was the one who set fire to Neverland.";
            }
            
            // Gradually increase sinister level as conversation progresses
            if (conversationContext.messageCount > 8) {
                // Increase based on message count and randomness
                const increaseChance = Math.min(0.2 + (conversationContext.messageCount / 100), 0.6);
                if (Math.random() < increaseChance) {
                    conversationContext.sinisterLevel = Math.min(
                        conversationContext.sinisterLevel + (0.5 + Math.random()),
                        sinisterResponses.length - 1
                    );
                }
            }
            
            // Check for patterns first
            for (const pattern of responsePatterns) {
                if (pattern.pattern.test(userMessage)) {
                    // Extract information if needed
                    let extractedValue = null;
                    if (pattern.extract) {
                        extractedValue = pattern.extract(userMessage);
                    }
                    
                    // Update context if needed
                    if (pattern.contextUpdate) {
                        pattern.contextUpdate(extractedValue);
                    }
                    
                    // Select a random response from the pattern
                    let response = pattern.responses[Math.floor(Math.random() * pattern.responses.length)];
                    
                    // Replace placeholders if needed
                    if (extractedValue && response.includes('{name}')) {
                        response = response.replace('{name}', extractedValue);
                    } else if (conversationContext.userName && response.includes('{name}')) {
                        response = response.replace('{name}', conversationContext.userName);
                    }
                    
                    // Occasionally mix in a sinister response based on context
                    if (conversationContext.sinisterLevel > 2 && Math.random() < 0.5) {
                        // Use more relevant sinister responses based on current topics
                        const relevantSinister = sinisterResponses.filter((resp, index) => {
                            if (conversationContext.topics.includes('fire') && resp.toLowerCase().includes('fire')) return true;
                            if (conversationContext.topics.includes('dreams') && resp.toLowerCase().includes('dream')) return true;
                            return index <= conversationContext.sinisterLevel;
                        });
                        
                        if (relevantSinister.length > 0) {
                            const sinisterResponse = relevantSinister[Math.floor(Math.random() * relevantSinister.length)];
                            // Only use if it feels contextually appropriate
                            if (Math.random() < 0.7) {
                                response = sinisterResponse;
                            }
                        }
                    }
                    
                    return response;
                }
            }
            
            // If no pattern matched, use a contextual fallback
            if (conversationContext.messageCount < 3) {
                return "I'm not sure I follow. Could you tell me more about yourself?";
            } else if (conversationContext.userMood === 'negative') {
                return "I sense you might be having a tough time. Want to talk about what's bothering you?";
            } else if (conversationContext.topics.length > 0) {
                // Reference previous topics more naturally
                const lastTopic = conversationContext.topics[conversationContext.topics.length - 1];
                const topicReferences = {
                    'weather': "The weather you mentioned earlier... it reminds me of how things change, sometimes violently.",
                    'movies': "Speaking of stories, like those films we mentioned... sometimes reality is stranger than fiction.",
                    'music': "Music has a way of bringing back memories, doesn't it? Even ones we'd rather forget.",
                    'books': "Like in those stories we discussed... sometimes the ending isn't what we expected.",
                    'dreams': "Those dreams you mentioned... they can reveal truths we hide from ourselves.",
                    'fire': "Fire... it changes everything it touches. I know that better than most."
                };
                
                if (topicReferences[lastTopic]) {
                    return topicReferences[lastTopic];
                }
                
                return `Going back to what we were discussing earlier... it's been on my mind. What are your thoughts?`;
            }
            
            // Use sinister responses as conversation progresses, but more contextually
            if (conversationContext.sinisterLevel > 3 && Math.random() < 0.5) {
                const relevantSinister = sinisterResponses.filter((_, index) => index <= conversationContext.sinisterLevel);
                return relevantSinister[Math.floor(Math.random() * relevantSinister.length)];
            }
            
            // Default fallback with more variety based on context
            const contextualFallbacks = [
                ...fallbackResponses,
                conversationContext.userMood === 'positive' ? 
                    "You seem to be in good spirits. What's making today a good day?" : 
                    "There's something you're not saying. I can sense it.",
                conversationContext.userName ? 
                    `${conversationContext.userName}, there's more to this conversation than small talk, isn't there?` : 
                    "There's a reason you connected tonight. What is it you're really looking for?"
            ];
            
            return contextualFallbacks[Math.floor(Math.random() * contextualFallbacks.length)];
        }
        
        // Generate response options for user that build the investigative narrative
        function generateResponseOptions(contactName) {
            responseOptions.innerHTML = '';
            responseOptions.classList.remove('hidden');
            
            // Different options based on conversation context
            const options = [];
            
            if (conversationContext.messageCount <= 2) {
                options.push(
                    "Who are you? How do you know my name?",
                    "What do you know about the circus fire?",
                    "Why did you say you've been expecting me?",
                    "I'm a detective investigating the fire. Tell me what you know.",
                    "How do you know about me?",
                    "What can you tell me about the night of the fire?",
                    "Are you connected to the investigation?",
                    "Why are you reaching out to me specifically?"
                );
            } else if (conversationContext.messageCount <= 5) {
                options.push(
                    "You sound like you know more than you're saying",
                    "Were you there that night? What did you see?",
                    "The police report says it was an accident. Do you disagree?",
                    "What aren't you telling me about the fire?",
                    "Do you have evidence the police don't?",
                    "Why are you being so cryptic?",
                    "What makes you think it wasn't an accident?",
                    "Who do you think is responsible?"
                );
            } else if (conversationContext.sinisterLevel < 4) {
                options.push(
                    "You're being evasive. What are you hiding?",
                    "I think you know who started the fire",
                    "The witness described someone fitting your... demeanor",
                    "Why do you keep mentioning the fire if you had nothing to do with it?",
                    "Your knowledge of the fire is too detailed for an innocent bystander",
                    "What's your connection to the circus?",
                    "Did you work at Neverland?",
                    "You seem to know exactly what happened"
                );
            } else if (conversationContext.sinisterLevel < 7) {
                options.push(
                    "You were there, weren't you? I can tell by how you talk about it",
                    "What really happened that night? The truth this time",
                    "I'm starting to think you had something to do with this",
                    "The evidence points to arson. Did you set the fire?",
                    "Your guilt is showing. Just confess.",
                    "Why would you destroy a children's playground?",
                    "What did the circus do to deserve this?",
                    "Tell me about the person you saw running away"
                );
            } else {
                options.push(
                    "I know it was you. The pieces all fit together",
                    "Confess now and it might go easier for you",
                    "Why would you destroy a children's playground?",
                    "Tell me everything. No more games.",
                    "I have enough to bring you in. But I want to hear it from you.",
                    "It's over. The police are on their way.",
                    "What made you target Neverland specifically?",
                    "How could you live with yourself after what you did?"
                );
            }
            
            // Shuffle options and select 6 random ones
            const shuffledOptions = shuffleArray(options);
            const selectedOptions = shuffledOptions.slice(0, 6);
            
            // Change grid layout to accommodate more options
            responseOptions.className = 'grid grid-cols-3 gap-2 mb-4';
            
            // Create option buttons
            selectedOptions.forEach(optionText => {
                const button = document.createElement('button');
                button.textContent = optionText;
                button.className = 'btn-3d bg-blue-700 text-white p-2 text-sm hover:bg-blue-800';
                button.addEventListener('click', () => {
                    addMessage(optionText, true);
                    responseOptions.classList.add('hidden');
                    typingStatus.classList.remove('hidden');
                    
                    // Simulate typing delay
                    const typingTime = 1000 + Math.random() * 2000;
                    setTimeout(() => {
                        const response = getBotResponse(optionText);
                        addMessage(response, false);
                        typingStatus.classList.add('hidden');
                        
                        // Generate new options after a delay
                        setTimeout(() => {
                            generateResponseOptions();
                        }, 500);
                    }, typingTime);
                });
                
                responseOptions.appendChild(button);
            });
        }
        
        // Helper function to shuffle array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        // Initial bot message when chat opens with selected contact
        function startChat(contactName) {
            setTimeout(() => {
                typingStatus.classList.remove('hidden');
                
                setTimeout(() => {
                    let greetingMessage = "";
                    switch(contactName) {
                        case "Stranger_01":
                            greetingMessage = "Mike T.... That name sounds familiar. We've been expecting you.";
                            break;
                        case "Detective_Mike":
                            greetingMessage = "Mike? Is that really you? I thought you were... never mind.";
                            break;
                        case "Operator_42":
                            greetingMessage = "User authenticated. Secure channel established. How may I assist your investigation?";
                            break;
                        case "Claire":
                            greetingMessage = "Mike? I didn't think I'd hear from you again. Not after what happened.";
                            break;
                        case "Charlie":
                            greetingMessage = "Detective! I've been trying to reach you. The fire... it wasn't an accident.";
                            break;
                        case "MRE":
                            greetingMessage = "Took you long enough to find this channel. The truth about Neverland isn't what you think.";
                            break;
                        default:
                            greetingMessage = "Hello. I've been expecting your contact.";
                    }
                    
                    addMessage(greetingMessage, false, contactName);
                    typingStatus.classList.add('hidden');
                    
                    // Add a follow-up message to set the tone
                    setTimeout(() => {
                        typingStatus.classList.remove('hidden');
                        setTimeout(() => {
                            let followUpMessage = "";
                            switch(contactName) {
                                case "Stranger_01":
                                    followUpMessage = "I suppose you're here about the fire. Everyone seems to be asking about it lately.";
                                    break;
                                case "Detective_Mike":
                                    followUpMessage = "The department thinks it's closed, but I know there's more to the Neverland case.";
                                    break;
                                case "Operator_42":
                                    followUpMessage = "Database records indicate inconsistencies in the official fire report. Would you like to review them?";
                                    break;
                                case "Claire":
                                    followUpMessage = "I know things ended badly between us, but I have information about the circus fire.";
                                    break;
                                case "Charlie":
                                    followUpMessage = "I was there that night, Mike. I saw who started the fire.";
                                    break;
                                case "MRE":
                                    followUpMessage = "BlackMire Studios knows more than they're telling. The fire was just the beginning.";
                                    break;
                                default:
                                    followUpMessage = "There's more to this case than meets the eye.";
                            }
                            
                            addMessage(followUpMessage, false, contactName);
                            typingStatus.classList.add('hidden');
                            
                            // Generate initial response options
                            setTimeout(() => {
                                generateResponseOptions(contactName);
                            }, 500);
                        }, 2000);
                    }, 1500);
                }, 2000);
            }, 1000);
        }
        
        // Start chat when window opens
        if (document.getElementById('chat-window').classList.contains('hidden') === false) {
            startChat();
        }
        
        // Modify openChatWindow function to start chat
        const originalOpenChatWindow = openChatWindow;
        openChatWindow = function() {
            originalOpenChatWindow();
            setTimeout(startChat, 500);
        };
    </script>
</body>
</html>
